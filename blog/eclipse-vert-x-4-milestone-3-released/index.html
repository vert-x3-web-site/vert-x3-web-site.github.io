<!DOCTYPE html><html lang=en><head><title>Eclipse Vert.x 4 milestone 3 released!</title><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta content="width=device-width,initial-scale=1" name=viewport><meta content="Eclipse Vert.x is a tool-kit for building reactive applications on the JVM." name=description><link href=https://vertx.io/stylesheets/main.css media=screen rel=stylesheet><link href=https://vertx.io/stylesheets/font-awesome.min.css media=screen rel=stylesheet><link href=https://vertx.io/javascripts/styles/rainbow.min.css media=screen rel=stylesheet><!--[if lt IE 9]><script src="http://static.jboss.org/theme/js/libs/html5/pre3.6/html5.min.js"></script><![endif]--><link rel=apple-touch-icon sizes=57x57 href=https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-180x180.png><link rel=icon type=image/png href=https://vertx.io/assets/favicons/vertx-favicon-7/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://vertx.io/assets/favicons/vertx-favicon-7/android-chrome-192x192.png sizes=192x192><link rel=icon type=image/png href=https://vertx.io/assets/favicons/vertx-favicon-7/favicon-96x96.png sizes=96x96><link rel=icon type=image/png href=https://vertx.io/assets/favicons/vertx-favicon-7/favicon-16x16.png sizes=16x16><link rel=manifest href=https://vertx.io/assets/favicons/vertx-favicon-7/manifest.json><link rel=mask-icon href=https://vertx.io/assets/favicons/vertx-favicon-7/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content=#7d3194><meta name=msapplication-TileImage content=https://vertx.io/assets/favicons/vertx-favicon-7/mstile-144x144.png><meta name=theme-color content=#ffffff><link href="https://fonts.googleapis.com/css?family=Ubuntu:400,500,700,400italic" rel=stylesheet type=text/css><link rel=alternate type=application/rss+xml title=RSS href=https://vertx.io/feed.xml><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-30144458-1', 'auto');
    ga('create', 'UA-71153120-1', 'auto', 'tracker');
    ga('send', 'pageview');
    ga('tracker.send', 'pageview');</script></head><body><a href="http://www.reactivemanifesto.org/" id=reactive-manifesto-banner><img style="border: 0; position: fixed; right: 0; top:0; z-index: 9000" src=https://d379ifj7s9wntv.cloudfront.net/reactivemanifesto/images/ribbons/we-are-reactive-black-right.png></a> <a id=skippy class="sr-only sr-only-focusable" href=#content><div class=container><span class=skiplink-text>Skip to main content</span></div></a><header class="navbar navbar-default navbar-static-top" id=top role=banner><div class=container><div class=navbar-header><button class="navbar-toggle collapsed" type=button data-toggle=collapse data-target=#vertx-navbar-collapse><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a href="https://vertx.io/" class=navbar-brand><img alt=Brand src=https://vertx.io/assets/logo-sm.png></a></div><nav class="collapse navbar-collapse" id=vertx-navbar-collapse><ul class="nav navbar-nav navbar-right"><li><a href="https://start.vertx.io/">Starter</a></li><li><a href="https://vertx.io/download/">Download</a></li><li><a href="https://how-to.vertx.io/">How-to</a></li><li><a href="https://vertx.io/docs/">Documentation</a></li><li><a href=https://github.com/vert-x3/wiki/wiki>Wiki</a></li><li><a href="https://vertx.io/community/">Community</a></li><li><a href="https://vertx.io/materials/">Materials</a></li><li><a href="https://vertx.io/blog/">Blog</a></li></ul></nav></div></header><div class=container><div class="row blog"><article class="col-xs-12 blog-post"><h2 class=blog-post-title>Eclipse Vert.x 4 milestone 3 released!</h2><p class=blog-post-meta>19th September 2019 by <a href=http://github.com/vietj>vietj</a></p><article><p>We are extremely pleased to announce the third 4.0 milestone release of Eclipse Vert.x .</p><p>Vert.x 4 is the evolution of the Vert.x 3.x series that will bring key features to Vert.x.</p><p>This release aims to provide a reliable distribution of the current development of Vert.x 4 for people that want to try it and provide feedback.</p><h4 id=futurisation>Futurisation</h4><p>Vert.x 4 extends the 3.x callback asynchronous model to a future/callback hybrid model.</p><pre><code class="hljs java"><span class=hljs-keyword>public</span> <span class=hljs-class><span class=hljs-keyword>interface</span> <span class=hljs-title>NetClient</span> </span>{

  <span class=hljs-comment>// Since 3.0</span>
  <span class=hljs-function><span class=hljs-keyword>void</span> <span class=hljs-title>connect</span><span class=hljs-params>(<span class=hljs-keyword>int</span> port, String host, Handler&lt;AsyncResult&lt;NetSocket&gt;&gt; handler)</span></span>;

  <span class=hljs-comment>// New in 4.0</span>
  <span class=hljs-function>Future&lt;NetSocket&gt; <span class=hljs-title>connect</span><span class=hljs-params>(<span class=hljs-keyword>int</span> port, String host)</span></span>;
}</code></pre><p>This third milestone makes progress and coverts the following stack modules:</p><ul><li>vertx-service-discovery</li><li>vertx-config</li><li>vertx-circuit-breaker</li></ul><h4 id=data-object-mapping-for-service-proxies>Data object mapping for service proxies</h4><p>Vert.x 3 service proxies is a lightweight layer on top of Vert.x Event-Bus providing typed contracts.</p><p>One can easily create a service on top of the Event-Bus.</p><pre><code class="hljs java"><span class=hljs-annotation>@VertxGen</span>
<span class=hljs-class><span class=hljs-keyword>interface</span> <span class=hljs-title>DateService</span> </span>{

  <span class=hljs-comment>// callback the handler with the current date</span>
  <span class=hljs-function><span class=hljs-keyword>void</span> <span class=hljs-title>date</span><span class=hljs-params>(Handler&lt;AsyncResult&lt;String&gt;&gt; handler)</span>
}</span></code></pre><p>Service proxies request/response payload are of type JSON.</p><p>Of course service proxies allow to map beans to JSON using data objects but this comes with two caveats</p><ul><li>only JSON object can be mapped</li><li>the data object must be a <code>@DataObject</code> annotated bean with a <code>toJson()</code> method and a JSON object constructor</li></ul><p>In Vert.x 4 we extend the data object support to any Java class and any JSON type, e.g in this example</p><pre><code class="hljs java"><span class=hljs-annotation>@VertxGen</span>
<span class=hljs-class><span class=hljs-keyword>interface</span> <span class=hljs-title>DateService</span> </span>{

  <span class=hljs-comment>// encode the date with iso date format</span>
  <span class=hljs-annotation>@Mapper</span> <span class=hljs-function><span class=hljs-keyword>static</span> String <span class=hljs-title>toJson</span><span class=hljs-params>(ZonedDateTime value)</span> </span>{
    <span class=hljs-keyword>return</span> ZonedDateTime.format(value);
  }

  <span class=hljs-comment>// decode the date with iso date format</span>
  <span class=hljs-annotation>@Mapper</span> <span class=hljs-function><span class=hljs-keyword>static</span> ZonedDateTime <span class=hljs-title>fromJson</span><span class=hljs-params>(String value)</span> </span>{
    <span class=hljs-keyword>return</span> ZonedDateTime.parse(value);
  }

  <span class=hljs-comment>// callback the handler with the current date</span>
  <span class=hljs-function><span class=hljs-keyword>void</span> <span class=hljs-title>date</span><span class=hljs-params>(Handler&lt;AsyncResult&lt;ZonedDateTime&gt;&gt; handler)</span>
}</span></code></pre><p>The generated code will then use these mappers to encode and decode JSON values.</p><p>For reusability mappers can also be <code>java.util.function.Function</code> instead, e.g</p><pre><code class="hljs java"><span class=hljs-annotation>@Mapper</span> Function&lt;String, ZonedDateTime) fromJson = ZonedDateTime::parse;
<span class=hljs-annotation>@Mapper</span> Function&lt;ZonedDateTime, String&gt; toJson = ZonedDateTime::toString;</code></pre><h4 id=mongo-client-gridfs>Mongo client GridFS</h4><p>The client can store and retrieve files and binary data using MongoDB GridFS.</p><pre><code class="hljs java">Future&lt;String&gt; fut = gridFsClient.uploadFile(<span class=hljs-string>"file.name"</span>);

fut.setHandler(res -&gt; {
   <span class=hljs-keyword>if</span> (res.succeeded()) {
     String id = res.result();
     <span class=hljs-comment>//The ID of the stored object in Grid FS</span>
   } <span class=hljs-keyword>else</span> {
     res.cause().printStackTrace();
   }
 });</code></pre><p>The client can perform the usual CRUD operations on files and also provide bucket management.</p><h4 id=vert-x-web-utilities>Vert.x Web utilities</h4><p>While the routing context will allow you to access the underlying request and response objects, sometimes it will be more productive if a few shortcuts would be present to help with common tasks. A few helpers are present in the context to facilitate with this task.</p><p>Serve an “attachment”, an attachment is a response that will trigger the browser to open the response on the OS application configured to handle a specific mime type. Imagine you’re generating a PDF:</p><pre><code class="hljs java">routingContext
  .attachment(<span class=hljs-string>"weekly-report.pdf"</span>)
  .end(pdfBuffer);</code></pre><p>Perform a redirect to a different page or host. One example is to redirect to an HTTPS variant of the application:</p><pre><code class="hljs java">routingContext.redirect(<span class=hljs-string>"https://securesite.com/"</span>);</code></pre><p>Send a JSON response to the client:</p><pre><code class="hljs java"><span class=hljs-comment>// no need to specify the content type headers</span>
rc.json(<span class=hljs-keyword>new</span> JsonObject().put(<span class=hljs-string>"hello"</span>, <span class=hljs-string>"vert.x"</span>));</code></pre><p>Simple content type check:</p><pre><code class="hljs java"><span class=hljs-keyword>if</span> (routingContext.is(<span class=hljs-string>"application/json"</span>)) {
  <span class=hljs-comment>// ...</span>
}</code></pre><p>Verify if a request is “fresh” with respect to the cache headers and the current values of last modified/ etag:</p><pre><code class="hljs java"><span class=hljs-keyword>if</span> (rc.isFresh()) {
  <span class=hljs-comment>// client cache value is fresh perhaps we</span>
  <span class=hljs-comment>// can stop and return 304?</span>
}</code></pre><h4 id=other-changes>Other changes</h4><ul><li>Groovy has been simplified in Vert.x 4 to remove code generation that was not really needed in practice</li><li>The original Redis client deprecated in 3.7 has been removed replaced by the new Redis client</li><li>JSON changes<ul><li>Jackson databind is now an optional Maven dependency which means that applications need to explicitly add this dependency to the classpath</li><li>Specific Jackson utility methods are moved to specific Jackson classes</li><li>Vert.x can use an alternative implementation than Jackson for JSON encoding and JSON decoding</li></ul></li><li>The following components have reached their end of life and have been pruned<ul><li>MySQL / PostgreSQL async client replaced by the Vert.x SQL Client (since 3.8)</li><li>AMQP bridge replaced by the Vert.x AMQP Client (since 3.7)</li></ul></li></ul><h4 id=ramping-up-to-vert-x-4>Ramping up to Vert.x 4</h4><p>Instead of developing all new features exclusively in Vert.x 4, we introduce some of these features in the 3.x branch so the community can benefit from them. The Vert.x 4 development focus on more fundamental changes that cannot be done in the 3.x series.</p><p><img src=https://vertx.io/assets/blog/vertx-4-milestone3-release/vertx-4-timeline.png alt=Screenshot class=img-responsive></p><p>This is the third milestone of Vert.x 4, we aim to release Vert.x 4 by the end of this year and you can of course expect more milestones to outline the progress of the effort.</p><h4 id=finally>Finally</h4><p>The <a href=https://github.com/vert-x3/wiki/wiki/4.0.0-Deprecations-and-breaking-changes>deprecations and breaking changes</a> can be found on the wiki.</p><p>For this release there are no Docker images.,</p><p>The release artifacts have been deployed to <a href="https://search.maven.org/search?q=g:io.vertx%20AND%20v:4.0.0-milestone3">Maven Central</a> and you can get the distribution on <a href="https://repo1.maven.org/maven2/io/vertx/vertx-stack-manager/4.0.0-milestone3/">Maven Central</a>.</p><p>You can bootstrap a Vert.x 4.0.0-milestone3 project using <a href=https://start.vertx.io>https://start.vertx.io</a>.</p><p>The documentation has been deployed on this preview web-site <a href="https://vertx-ci.github.io/vertx-4-preview/docs/">https://vertx-ci.github.io/vertx-4-preview/docs/</a></p><p>That’s it! Happy coding and see you soon on our user or dev <a href=https://vertx.io/community>channels</a>.</p></article></article></div></div><footer><div class=container><div class=row><div class="col-xs-4 col-sm-4 col-md-2 col-lg-2"><h2>Eclipse Vert.x</h2><ul class=list-unstyled><li><a href="https://vertx.io/">Home</a></li><li><a href="https://vertx.io/download/">Download</a></li><li><a href="https://vertx.io/docs/">Documentation</a></li><li><a href=https://github.com/vert-x3/wiki/wiki>Wiki</a></li><li><a href="https://vertx.io/blog/">Blog</a></li><li><a href="https://vertx.io/vertx2/" class=vertx-2-link>Vert.x 2</a></li></ul></div><div class="col-xs-4 col-sm-4 col-md-2 col-lg-2"><h2>Community</h2><ul class=list-unstyled><li><a href="https://vertx.io/community/">Help &amp; Contributors</a></li><li><a href="https://vertx.io/materials/">Learning materials</a></li><li><a href=https://groups.google.com/forum/?fromgroups#!forum/vertx>User Group</a></li><li><a href=https://groups.google.com/forum/?fromgroups#!forum/vertx-dev>Developer Group</a></li></ul></div><div class="col-xs-4 col-sm-4 col-md-2 col-lg-2"><h2>Eclipse</h2><ul class=list-unstyled><li><a href="http://www.eclipse.org/">Eclipse Foundation</a></li><li><a href=https://eclipse.org/legal/privacy.php>Privacy Policy</a></li><li><a href=https://eclipse.org/legal/termsofuse.php>Terms of Use</a></li><li><a href=https://eclipse.org/legal/copyright.php>Copyright Agent</a></li><li><a href=http://www.eclipse.org/legal>Legal Resources</a></li></ul></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 copyright"><p>Eclipse Vert.x is open source and dual-licensed under the <a href=http://www.eclipse.org/legal/epl-v20.html>Eclipse Public License 2.0</a> and <a href=https://www.apache.org/licenses/LICENSE-2.0.html>Apache License 2.0</a>.</p><p>This website is licensed under the <a href="http://creativecommons.org/licenses/by-sa/3.0/">CC BY-SA 3.0 License</a>.<br>Design by <a href=https://www.michel-kraemer.com>Michel Kr&auml;mer</a>.</p><div class=row><div class="col-sm-12 col-md-5 col-md-offset-1 col-lg-offset-2"><a href=http://eclipse.org><img class="logo eclipse-logo" src=https://vertx.io/assets/eclipse_logo_grey_small.png width=204 height=48></a></div><div class="col-sm-12 col-md-5 col-md-offset-1 col-lg-offset-0"><a href=http://cloudbees.com><img class="logo cloudbees-logo" src=https://vertx.io/assets/Button-Built-on-CB-1-grey.png width=180 height=48></a></div><div class="col-sm-12 col-md-5 col-md-offset-7 jprofiler"><a href=http://www.ej-technologies.com/products/jprofiler/overview.html style=text-decoration:none><img class="logo jprofiler-logo" src=https://vertx.io/assets/jprofiler-logo.png width=48 height=48><span class=jprofiler-logo>&nbsp; JPROFILER</span></a></div></div></div></div></div></footer><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js></script><script src=https://vertx.io/javascripts/bootstrap.min.js></script><script src=https://vertx.io/javascripts/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script><link rel=stylesheet type=text/css href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css"><script src=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js></script><script>window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#64386b",
      "text": "#ffcdfd"
    },
    "button": {
      "background": "transparent",
      "text": "#f8a8ff",
      "border": "#f8a8ff"
    }
  },
  "content": {
    "message": "This website uses anonymous cookies to ensure we provide you the best experience. ",
    "link": "Opt out!",
    "href": "https://tools.google.com/dlpage/gaoptout/"
  }
})});</script></body></html>