<!DOCTYPE html><html lang=en><head><title>Eclipse Vert.x 4 beta 3 released!</title><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta content="width=device-width,initial-scale=1" name=viewport><meta content="Eclipse Vert.x is a tool-kit for building reactive applications on the JVM." name=description><link href=https://vertx.io/stylesheets/main.css media=screen rel=stylesheet><link href=https://vertx.io/stylesheets/font-awesome.min.css media=screen rel=stylesheet><link href=https://vertx.io/javascripts/styles/rainbow.min.css media=screen rel=stylesheet><!--[if lt IE 9]><script src="http://static.jboss.org/theme/js/libs/html5/pre3.6/html5.min.js"></script><![endif]--><link rel=apple-touch-icon sizes=57x57 href=https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-180x180.png><link rel=icon type=image/png href=https://vertx.io/assets/favicons/vertx-favicon-7/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://vertx.io/assets/favicons/vertx-favicon-7/android-chrome-192x192.png sizes=192x192><link rel=icon type=image/png href=https://vertx.io/assets/favicons/vertx-favicon-7/favicon-96x96.png sizes=96x96><link rel=icon type=image/png href=https://vertx.io/assets/favicons/vertx-favicon-7/favicon-16x16.png sizes=16x16><link rel=manifest href=https://vertx.io/assets/favicons/vertx-favicon-7/manifest.json><link rel=mask-icon href=https://vertx.io/assets/favicons/vertx-favicon-7/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content=#7d3194><meta name=msapplication-TileImage content=https://vertx.io/assets/favicons/vertx-favicon-7/mstile-144x144.png><meta name=theme-color content=#ffffff><link href="https://fonts.googleapis.com/css?family=Ubuntu:400,500,700,400italic" rel=stylesheet type=text/css><link rel=alternate type=application/rss+xml title=RSS href=https://vertx.io/feed.xml><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-30144458-1', 'auto');
    ga('create', 'UA-71153120-1', 'auto', 'tracker');
    ga('send', 'pageview');
    ga('tracker.send', 'pageview');</script></head><body><a href="http://www.reactivemanifesto.org/" id=reactive-manifesto-banner><img style="border: 0; position: fixed; right: 0; top:0; z-index: 9000" src=https://d379ifj7s9wntv.cloudfront.net/reactivemanifesto/images/ribbons/we-are-reactive-black-right.png></a> <a id=skippy class="sr-only sr-only-focusable" href=#content><div class=container><span class=skiplink-text>Skip to main content</span></div></a><header class="navbar navbar-default navbar-static-top" id=top role=banner><div class=container><div class=navbar-header><button class="navbar-toggle collapsed" type=button data-toggle=collapse data-target=#vertx-navbar-collapse><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a href="https://vertx.io/" class=navbar-brand><img alt=Brand src=https://vertx.io/assets/logo-sm.png></a></div><nav class="collapse navbar-collapse" id=vertx-navbar-collapse><ul class="nav navbar-nav navbar-right"><li><a href="https://start.vertx.io/">Starter</a></li><li><a href="https://vertx.io/download/">Download</a></li><li><a href="https://how-to.vertx.io/">How-to</a></li><li><a href="https://vertx.io/docs/">Documentation</a></li><li><a href=https://github.com/vert-x3/wiki/wiki>Wiki</a></li><li><a href="https://vertx.io/community/">Community</a></li><li><a href="https://vertx.io/materials/">Materials</a></li><li><a href="https://vertx.io/blog/">Blog</a></li></ul></nav></div></header><div class=container><div class="row blog"><article class="col-xs-12 blog-post"><h2 class=blog-post-title>Eclipse Vert.x 4 beta 3 released!</h2><p class=blog-post-meta>25th September 2020 by <a href=http://github.com/vietj>vietj</a></p><article><p>We are extremely pleased to announce the third 4.0 beta release of Eclipse Vert.x .</p><p>Vert.x 4 is the evolution of the Vert.x 3.x series that will bring key features to Vert.x.</p><h4 id=http-client-request-creation>HTTP client request creation</h4><p>Until Beta3, HTTP client has created lazy HTTP requests, since then creating a request has become an asynchronous operation guaranteeing that a slot for performing the request is granted:</p><pre><code class="hljs java"><span class=hljs-comment>// Created a request</span>
HttpClientRequest request = client.get(<span class=hljs-string>"/some-uri"</span>);

<span class=hljs-comment>// Connect to the server or reuse a connection from the pool and then try to send the request</span>
request.end();

<span class=hljs-comment>// Since Beta3</span>
client.get(<span class=hljs-string>"/some-uri"</span>, ar -&gt; {
  <span class=hljs-comment>// The client connected to the server or reused a connection from the pool</span>
  <span class=hljs-keyword>if</span> (ar.succeeded()) {
    HttpClientRequest request = ar.result();

    <span class=hljs-comment>// Send the request</span>
    request.end();
  }
});</code></pre><p>Another (hidden) motivation to switch to this model is avoiding data races when the HTTP client is used outside the event-loop using futures.</p><p>Previously you could write code like:</p><pre><code class="hljs java">Future&lt;HttpClientResponse&gt; get = client.get(<span class=hljs-string>"some-uri"</span>);

<span class=hljs-comment>// Assuming we have a client that returns a future response</span>
<span class=hljs-comment>// assuging this is *not* on the event-loop</span>
Future&lt;Buffer&gt; fut = get.send().compose(response -&gt; {

  <span class=hljs-comment>// Response events might have happen already</span>
  <span class=hljs-keyword>return</span> response.body();
});</code></pre><p>Now you can write instead:</p><pre><code class="hljs java">Future&lt;Buffer&gt; fut = client.get(<span class=hljs-string>"some-uri"</span>).compose(request -&gt; {
  request.send().compose(response -&gt; response.body())
});</code></pre><h4 id=httpserverresponse-send-method>HttpServerResponse send method</h4><p>In the previous beta, HTTP client request got a new simplified <code>send</code> method to send a body or a stream. We did the same for the HTTP server response API:</p><pre><code class="hljs java">server.requestHandler(req -&gt; {
  req.pause();
  getSomeStream().onSuccess(stream -&gt; {
    req.response().send(stream);
  });
});</code></pre><h4 id=http-tunnel-improvements>HTTP tunnel improvements</h4><p>Creating an HTTP tunnel has now become more natural:</p><pre><code class="hljs java">client.request(HttpMethod.CONNECT, <span class=hljs-string>"some-uri"</span>)
  .onSuccess(request -&gt; {

    <span class=hljs-comment>// Connect to the server</span>
    request.connect(ar -&gt; {
      <span class=hljs-keyword>if</span> (ar.succeeded()) {
        HttpClientResponse response = ar.result();

        <span class=hljs-keyword>if</span> (response.statusCode() != <span class=hljs-number>200</span>) {
          <span class=hljs-comment>// Connect failed for some reason</span>
        } <span class=hljs-keyword>else</span> {
          <span class=hljs-comment>// Tunnel created, raw buffers are transmitted on the wire</span>
          NetSocket socket = response.netSocket();
        }
      }
    });
});</code></pre><p>The new <code>connect</code> method tells the client that when a <code>201</code> response is received from the server then the connection should be switched to not interpret HTTP data anymore.</p><p>On the server, the API has become asynchronous and renamed to <code>toNetSocket()</code>:</p><pre><code class="hljs java">server.requestHandler(request -&gt; {
  <span class=hljs-keyword>if</span> (request.method() == HttpMethod.CONNECT) {
    <span class=hljs-comment>// Will send an HTTP 201 status code and switch the connection to use raw buffers</span>
    request.toNetSocket(ar -&gt; {
      <span class=hljs-keyword>if</span> (ar.succeeded()) {
        NetSocket socket = ar.result();
      }
    });
  }
});</code></pre><h4 id=websocket-upgrade-improvements>WebSocket upgrade improvements</h4><p>The server WebSocket manual upgrade operation has also become asynchronous and renamed to <code>toWebSocket()</code></p><pre><code class="hljs java">server.requestHandler(request -&gt; {
  <span class=hljs-keyword>if</span> (request.method() == HttpMethod.GET &amp;&amp; <span class=hljs-string>"Upgrade"</span>.equals(request.getHeader(<span class=hljs-string>"connection"</span>))) {
    <span class=hljs-comment>// Will do the WebSocket handshake</span>
    request.toWebSocket(ar -&gt; {
      <span class=hljs-keyword>if</span> (ar.succeeded()) {
        ServerWebSocket socket = ar.result();
      }
    });
  }
});</code></pre><h4 id=row-to-json-conversion>Row to JSON conversion</h4><p>SQL client can now easily transform a <code>Row</code> into a JSON object, this can be convienient for applications directly transferring JSON results to the client:</p><pre><code class="hljs java">client
  .preparedQuery(<span class=hljs-string>"SELECT * FROM USERS WHERE ID=$1"</span>)
  .execute(Tuple.of(id))
  .onSuccess(row -&gt; {
    <span class=hljs-keyword>if</span> (row.size() == <span class=hljs-number>1</span>) {
      JsonObject json = row.iterator().next().toJson();
    }
  });</code></pre><h4 id=oauth2-oidc-pkce>OAuth2/OIDC PKCE</h4><p><code>OAuth2Handler</code> can now handle <a href=https://tools.ietf.org/html/rfc7636>PKCE</a>, which means another layer of security to your application.</p><h4 id=redis-resp3>Redis RESP3</h4><p>The redis client can now speak <code>RESP3</code> with redis servers. This means it can handle all the new types and APIs available on redis from all versions (RESP2, redis &lt; 6) and (RESP3, redis &gt;= 6).</p><h4 id=finally>Finally</h4><p>This is the Beta3 relase of Vert.x 4, you can of course expect another beta as we get feedback from the community and fix issues that we failed to catch before.</p><p>You can also read the milestone announces to know more about the overral changes:</p><ul><li><a href=https://vertx.io/blog/eclipse-vert-x-4-beta-1-released>https://vertx.io/blog/eclipse-vert-x-4-beta-1-released</a></li><li><a href=https://vertx.io/blog/eclipse-vert-x-4-milestone-5-released>https://vertx.io/blog/eclipse-vert-x-4-milestone-5-released</a></li><li><a href=https://vertx.io/blog/eclipse-vert-x-4-milestone-5-released>https://vertx.io/blog/eclipse-vert-x-4-milestone-5-released</a></li><li><a href=https://vertx.io/blog/eclipse-vert-x-4-milestone-4-released>https://vertx.io/blog/eclipse-vert-x-4-milestone-4-released</a></li><li><a href=https://vertx.io/blog/eclipse-vert-x-4-milestone-3-released>https://vertx.io/blog/eclipse-vert-x-4-milestone-3-released</a></li><li><a href=https://vertx.io/blog/eclipse-vert-x-4-milestone-2-released>https://vertx.io/blog/eclipse-vert-x-4-milestone-2-released</a></li><li><a href=https://vertx.io/blog/eclipse-vert-x-4-milestone-1-released>https://vertx.io/blog/eclipse-vert-x-4-milestone-1-released</a></li></ul><p>The <a href=https://github.com/vert-x3/wiki/wiki/4.0.0-Deprecations-and-breaking-changes>deprecations and breaking changes</a> can be found on the wiki.</p><p>For this release there are no Docker images.</p><p>The release artifacts have been deployed to <a href="https://search.maven.org/search?q=g:io.vertx%20AND%20v:4.0.0.Beta1">Maven Central</a> and you can get the distribution on <a href="https://repo1.maven.org/maven2/io/vertx/vertx-stack-manager/4.0.0.Beta1/">Maven Central</a>.</p><p>You can bootstrap a Vert.x 4.0.0.Beta3 project using <a href=https://start.vertx.io>https://start.vertx.io</a>.</p><p>The documentation has been deployed on this preview web-site <a href="https://vertx-web-site.github.io/docs/">https://vertx-web-site.github.io/docs/</a></p><p>That’s it! Happy coding and see you soon on our user or dev <a href=https://vertx.io/community>channels</a>.</p></article></article></div></div><footer><div class=container><div class=row><div class="col-xs-4 col-sm-4 col-md-2 col-lg-2"><h2>Eclipse Vert.x</h2><ul class=list-unstyled><li><a href="https://vertx.io/">Home</a></li><li><a href="https://vertx.io/download/">Download</a></li><li><a href="https://vertx.io/docs/">Documentation</a></li><li><a href=https://github.com/vert-x3/wiki/wiki>Wiki</a></li><li><a href="https://vertx.io/blog/">Blog</a></li><li><a href="https://vertx.io/vertx2/" class=vertx-2-link>Vert.x 2</a></li></ul></div><div class="col-xs-4 col-sm-4 col-md-2 col-lg-2"><h2>Community</h2><ul class=list-unstyled><li><a href="https://vertx.io/community/">Help &amp; Contributors</a></li><li><a href="https://vertx.io/materials/">Learning materials</a></li><li><a href=https://groups.google.com/forum/?fromgroups#!forum/vertx>User Group</a></li><li><a href=https://groups.google.com/forum/?fromgroups#!forum/vertx-dev>Developer Group</a></li></ul></div><div class="col-xs-4 col-sm-4 col-md-2 col-lg-2"><h2>Eclipse</h2><ul class=list-unstyled><li><a href="http://www.eclipse.org/">Eclipse Foundation</a></li><li><a href=https://eclipse.org/legal/privacy.php>Privacy Policy</a></li><li><a href=https://eclipse.org/legal/termsofuse.php>Terms of Use</a></li><li><a href=https://eclipse.org/legal/copyright.php>Copyright Agent</a></li><li><a href=http://www.eclipse.org/legal>Legal Resources</a></li></ul></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 copyright"><p>Eclipse Vert.x is open source and dual-licensed under the <a href=http://www.eclipse.org/legal/epl-v20.html>Eclipse Public License 2.0</a> and <a href=https://www.apache.org/licenses/LICENSE-2.0.html>Apache License 2.0</a>.</p><p>This website is licensed under the <a href="http://creativecommons.org/licenses/by-sa/3.0/">CC BY-SA 3.0 License</a>.<br>Design by <a href=https://www.michel-kraemer.com>Michel Kr&auml;mer</a>.</p><div class=row><div class="col-sm-12 col-md-5 col-md-offset-1 col-lg-offset-2"><a href=http://eclipse.org><img class="logo eclipse-logo" src=https://vertx.io/assets/eclipse_logo_grey_small.png width=204 height=48></a></div><div class="col-sm-12 col-md-5 col-md-offset-1 col-lg-offset-0"><a href=http://cloudbees.com><img class="logo cloudbees-logo" src=https://vertx.io/assets/Button-Built-on-CB-1-grey.png width=180 height=48></a></div><div class="col-sm-12 col-md-5 col-md-offset-7 jprofiler"><a href=http://www.ej-technologies.com/products/jprofiler/overview.html style=text-decoration:none><img class="logo jprofiler-logo" src=https://vertx.io/assets/jprofiler-logo.png width=48 height=48><span class=jprofiler-logo>&nbsp; JPROFILER</span></a></div></div></div></div></div></footer><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js></script><script src=https://vertx.io/javascripts/bootstrap.min.js></script><script src=https://vertx.io/javascripts/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script><link rel=stylesheet type=text/css href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css"><script src=//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js></script><script>window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#64386b",
      "text": "#ffcdfd"
    },
    "button": {
      "background": "transparent",
      "text": "#f8a8ff",
      "border": "#f8a8ff"
    }
  },
  "content": {
    "message": "This website uses anonymous cookies to ensure we provide you the best experience. ",
    "link": "Opt out!",
    "href": "https://tools.google.com/dlpage/gaoptout/"
  }
})});</script></body></html>