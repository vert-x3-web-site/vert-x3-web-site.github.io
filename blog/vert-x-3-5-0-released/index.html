<!DOCTYPE html><html lang=en><head><title>Vert.x 3.5.0 released !</title><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta content="width=device-width,initial-scale=1" name=viewport><meta content="Eclipse Vert.x is a tool-kit for building reactive applications on the JVM." name=description><link href=http://vertx.io/stylesheets/main.css media=screen rel=stylesheet><link href=http://vertx.io/stylesheets/font-awesome.min.css media=screen rel=stylesheet><link href=http://vertx.io/javascripts/styles/rainbow.min.css media=screen rel=stylesheet><!--[if lt IE 9]><script src="http://static.jboss.org/theme/js/libs/html5/pre3.6/html5.min.js"></script><![endif]--><link rel=apple-touch-icon sizes=57x57 href=http://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-57x57.png><link rel=apple-touch-icon sizes=60x60 href=http://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-60x60.png><link rel=apple-touch-icon sizes=72x72 href=http://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-72x72.png><link rel=apple-touch-icon sizes=76x76 href=http://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-76x76.png><link rel=apple-touch-icon sizes=114x114 href=http://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-114x114.png><link rel=apple-touch-icon sizes=120x120 href=http://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-120x120.png><link rel=apple-touch-icon sizes=144x144 href=http://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-144x144.png><link rel=apple-touch-icon sizes=152x152 href=http://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-152x152.png><link rel=apple-touch-icon sizes=180x180 href=http://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-180x180.png><link rel=icon type=image/png href=http://vertx.io/assets/favicons/vertx-favicon-7/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=http://vertx.io/assets/favicons/vertx-favicon-7/android-chrome-192x192.png sizes=192x192><link rel=icon type=image/png href=http://vertx.io/assets/favicons/vertx-favicon-7/favicon-96x96.png sizes=96x96><link rel=icon type=image/png href=http://vertx.io/assets/favicons/vertx-favicon-7/favicon-16x16.png sizes=16x16><link rel=manifest href=http://vertx.io/assets/favicons/vertx-favicon-7/manifest.json><link rel=mask-icon href=http://vertx.io/assets/favicons/vertx-favicon-7/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content=#7d3194><meta name=msapplication-TileImage content=http://vertx.io/assets/favicons/vertx-favicon-7/mstile-144x144.png><meta name=theme-color content=#ffffff><link href="http://fonts.googleapis.com/css?family=Ubuntu:400,500,700,400italic" rel=stylesheet type=text/css><link rel=alternate type=application/rss+xml title=RSS href=http://vertx.io/feed.xml><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-30144458-1', 'auto');
    ga('create', 'UA-71153120-1', 'auto', 'tracker');
    ga('send', 'pageview');
    ga('tracker.send', 'pageview');</script></head><body><a href="http://www.reactivemanifesto.org/" id=reactive-manifesto-banner><img style="border: 0; position: fixed; right: 0; top:0; z-index: 9000" src=http://d379ifj7s9wntv.cloudfront.net/reactivemanifesto/images/ribbons/we-are-reactive-black-right.png></a> <a id=skippy class="sr-only sr-only-focusable" href=#content><div class=container><span class=skiplink-text>Skip to main content</span></div></a><header class="navbar navbar-default navbar-static-top" id=top role=banner><div class=container><div class=navbar-header><button class="navbar-toggle collapsed" type=button data-toggle=collapse data-target=#vertx-navbar-collapse><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a href="http://vertx.io/" class=navbar-brand><img alt=Brand src=http://vertx.io/assets/logo-sm.png></a></div><nav class="collapse navbar-collapse" id=vertx-navbar-collapse><ul class="nav navbar-nav navbar-right"><li><a href="http://vertx.io/download/">Download</a></li><li><a href="http://vertx.io/docs/">Documentation</a></li><li><a href=https://github.com/vert-x3/wiki/wiki>Wiki</a></li><li><a href="http://vertx.io/community/">Community</a></li><li><a href="http://vertx.io/materials/">Materials</a></li><li><a href="http://vertx.io/blog/">Blog</a></li></ul></nav></div></header><div class=container><div class="row blog"><article class="col-xs-12 blog-post"><h2 class=blog-post-title>Vert.x 3.5.0 released !</h2><p class=blog-post-meta>20th October 2017 by <a href=http://github.com/vietj>vietj</a></p><article><p>The Vert.x team is pleased to announce the release of Vert.x 3.5.0.</p><p>As usual it delivers an impressive number of high quality features.</p><h4 id=let-s-go-rxjava2>Let’s go RxJava2</h4><p>First and foremost this release delivers the RxJava2 API with support of its full range of types.</p><p>In addition of <code>Single</code>, Rxified APIs also expose the<code>Completable</code> and <code>Maybe</code> types:</p><pre><code class=hljs>// expose <span class=hljs-type>Handler</span>&lt;<span class=hljs-type>AsyncResult</span>&lt;<span class=hljs-type>Void</span>&gt;&gt;
<span class=hljs-type>Completable</span> completable = server.rxClose();

completable.subscribe(() -&gt; <span class=hljs-type>System</span>.<span class=hljs-keyword>out</span>.println(<span class=hljs-string>"closed"</span>));

// expose <span class=hljs-type>Handler</span>&lt;<span class=hljs-type>AsyncResult</span>&lt;<span class=hljs-type>String</span>&gt;&gt; where the <span class=hljs-literal>result</span> can be null
<span class=hljs-type>Maybe</span>&lt;<span class=hljs-type>String</span>&gt; ipAddress = dnsClient.rxLookup(<span class=hljs-string>"www.google.com"</span>);
ipAddress.subscribe(
  value -&gt; <span class=hljs-type>System</span>.<span class=hljs-keyword>out</span>.println(<span class=hljs-string>"resolved to "</span> + value),
  err -&gt; err.printStackTrace(),
  () -&gt; <span class=hljs-type>System</span>.<span class=hljs-keyword>out</span>.println(<span class=hljs-string>"does not resolve"</span>));</code></pre><p>RxJava augments Vert.x streams with a <code>toObservable()</code> method, likewise RxJava2 adds the <code>toFlowable()</code> method:</p><pre><code class=hljs><span class=hljs-prompt>// Flowable&lt;Buffer&gt;</span> maps to a <span class=hljs-constant>ReadStream</span>&lt;<span class=hljs-constant>Buffer</span>&gt;
<span class=hljs-regexp>//</span> back-pressured stream
<span class=hljs-prompt>Flowable&lt;Buffer&gt;</span> flowable = asyncFile.toFlowable();

<span class=hljs-regexp>//</span> but we still can get an <span class=hljs-constant>Observable</span>&lt;<span class=hljs-constant>Buffer</span>&gt;
<span class=hljs-regexp>//</span> non back-pressured stream
<span class=hljs-prompt>Observable&lt;Buffer&gt;</span> flowable = asyncFile.toObservable();</code></pre><p>What’s so different between <code>Flowable</code> and <code>Observable</code>? the former handles back-pressure, i.e the subscriber can control the flow of items and the later can not!!!</p><p>You can read the documentation in the section of the <a href="http://vertx.io/docs/master/vertx-rx/java2/">docs</a> or go straight to the <a href=https://github.com/vert-x3/vertx-examples/tree/master/rxjava2-examples>examples</a></p><h4 id=kotlin-coroutines>Kotlin coroutines</h4><p>Support for <a href="http://vertx.io/docs/vertx-lang-kotlin-coroutines/kotlin/">Kotlin Coroutines</a> is one of my favourite 3.5 features (by the way I’ll present a talk about Vert.x and coroutines at <a href="https://www.kotlinconf.com/sessions/">KotlinConf</a>).</p><p>Coroutines allows you to reason about asynchronous flow the same way you do with traditional sequential flow with the extra bonus to use <code>try</code>/<code>catch</code>/<code>finally</code> super combo:</p><pre><code class=hljs>val movie = ctx.pathParam(<span class=hljs-string>"id"</span>)
val rating = <span class=hljs-type>Integer</span>.parseInt(ctx.queryParam(<span class=hljs-string>"getRating"</span>)[<span class=hljs-number>0</span>])
val connection = awaitResult&lt;<span class=hljs-type>SQLConnection</span>&gt; { client.getConnection(it) }
<span class=hljs-keyword>try</span> {
  val <span class=hljs-literal>result</span> = awaitResult&lt;<span class=hljs-type>ResultSet</span>&gt; { connection.queryWithParams(<span class=hljs-string>"SELECT TITLE FROM MOVIE WHERE ID=?"</span>, json { <span class=hljs-type>array</span>(movie) }, it) }
  <span class=hljs-keyword>if</span> (<span class=hljs-literal>result</span>.rows.size == <span class=hljs-number>1</span>) {
    awaitResult&lt;<span class=hljs-type>UpdateResult</span>&gt; { connection.updateWithParams(<span class=hljs-string>"INSERT INTO RATING (VALUE, MOVIE_ID) VALUES ?, ?"</span>, json { <span class=hljs-type>array</span>(rating, movie) }, it) }
    ctx.response().setStatusCode(<span class=hljs-number>200</span>).<span class=hljs-keyword>end</span>()
  } <span class=hljs-keyword>else</span> {
    ctx.response().setStatusCode(<span class=hljs-number>404</span>).<span class=hljs-keyword>end</span>()
  }
} <span class=hljs-keyword>finally</span> {
  connection.close()
}</code></pre><p>This example is borrowed from our <a href=https://github.com/vert-x3/vertx-examples/tree/master/kotlin-examples/coroutines>examples</a>.</p><p>NOTE: I’ve used <code>try</code>/<code>finally</code> purposely instead of Kotlin’s <code>use</code> extension method</p><h4 id=mqtt-client>MQTT Client</h4><p>In Vert.x 3.4 we added the <a href=http://vertx.io/docs/vertx-mqtt/java/#_vert_x_mqtt_server>MQTT server</a>, 3.5 completes the MQTT story with the <a href=http://vertx.io/docs/vertx-mqtt/java/#_vert_x_mqtt_client>MQTT client</a>:</p><pre><code class=hljs>MqttClient mqttClient = MqttClient.create(vertx,
   <span class=hljs-keyword>new</span> MqttClientOptions()
     .setPort(BROKER_PORT)
     .setHost(BROKER_HOST)).connect(ar -&gt;
  <span class=hljs-keyword>if</span> (ar.succeeded()) {
    System.<span class=hljs-keyword>out</span>.println(<span class=hljs-string>"Connected to a server"</span>);

    mqttClient.publish(
      MQTT_TOPIC,
      Buffer.buffer(MQTT_MESSAGE),
      MqttQoS.AT_MOST_ONCE,
      <span class=hljs-keyword>false</span>,
      <span class=hljs-keyword>false</span>,
      s -&gt; mqttClient.disconnect(d -&gt; System.<span class=hljs-keyword>out</span>.println(<span class=hljs-string>"Disconnected from server"</span>)));
  } <span class=hljs-keyword>else</span> {
    System.<span class=hljs-keyword>out</span>.println(<span class=hljs-string>"Failed to connect to a server"</span>);
    ar.cause().printStackTrace();
  }
});</code></pre><p>You can find MQTT client and server examples <a href=https://github.com/vert-x3/vertx-examples/tree/master/mqtt-examples>here</a></p><h4 id=web-api-contracts>Web API contracts</h4><p>With the new <a href="http://vertx.io/docs/vertx-web-api-contract/java/">OpenAPI</a> router factory we can focus on the API implementation and not on the validation of the input. The usage is quite simple:</p><pre><code class=hljs><span class=hljs-type>OpenAPI3RouterFactory</span>.createRouterFactoryFromFile(vertx, <span class=hljs-string>"petstore.yaml"</span>, ar -&gt; {
  <span class=hljs-keyword>if</span> (ar.succeeded()) {
    // <span class=hljs-type>Spec</span> loaded <span class=hljs-keyword>with</span> success
    <span class=hljs-type>OpenAPI3RouterFactory</span> routerFactory = ar.<span class=hljs-literal>result</span>();

    // add your <span class=hljs-type>API</span> <span class=hljs-keyword>and</span> security handlers to the factory

    // add it to a server
    vertx.createHttpServer()
      .requestHandler(routerFactory.getRouter()::accept)
      .listen();
  } <span class=hljs-keyword>else</span> {
    // <span class=hljs-type>Something</span> went wrong during router factory initialization
  }
});</code></pre><p>Now as a developer you only need to care about the API and not on the validation. The OpenAPI router will ensure that a request to an API will first to the contract before your handler is invoked.</p><h4 id=java-9-support>Java 9 support</h4><p>Java 9 was released a few days ago and the Vert.x stack has been carefully tested on Java 9 and most of our components run on Java 9 (Groovy does not run well on Java 9, please see the support <a href=https://github.com/vert-x3/wiki/wiki/Java-9-Support>matrix</a>)</p><p>As a bonus you can now use HTTP/2 out of the box with JDK SSL!</p><p>You can also use Vert.x jars as anonymous modules.</p><h4 id=event-driven-json-parsing>Event driven JSON Parsing</h4><p>We provide now an event driven <a href=http://vertx.io/docs/apidocs/io/vertx/core/parsetools/JsonParser.html>JSON Parser</a> emitting parse events that is very handy when you need to handle very large JSON structures and you don’t want to buffer it which introduce extra latency and increase the memory consumption.</p><p>The parser allows you to switch between fine grained JSON parse events or full structures, for instance you can parse an array of object very efficiently:</p><pre><code class=hljs>JsonParser parser = JsonParser.newParser();

<span class=hljs-comment>// The parser will handle JSON objects as values</span>
parser.objectValueMode();

parser.handler(event -&gt; {
  <span class=hljs-keyword>switch</span> (event.type()) {
    <span class=hljs-keyword>case</span> <span class=hljs-string>START_ARRAY:</span>
      <span class=hljs-comment>// Start the array</span>
      <span class=hljs-keyword>break</span>;
    <span class=hljs-keyword>case</span> <span class=hljs-string>END_ARRAY:</span>
      <span class=hljs-comment>// End the array</span>
      <span class=hljs-keyword>break</span>;
    <span class=hljs-keyword>case</span> <span class=hljs-string>VALUE:</span>
      <span class=hljs-comment>// Handle each object</span>
      <span class=hljs-keyword>break</span>;
  }
});</code></pre><h4 id=single-sql-operations>Single SQL operations</h4><p>Single SQL operations (aka <em>one-shot</em>) have been drastically simplified: most of the <code>SQLOperations</code> operations can now be performed directly on the <code>SQLClient</code>:</p><pre><code class=hljs>client.queryWithParams(<span class=hljs-string>"SELECT AVG(VALUE) AS VALUE FROM RATING WHERE MOVIE_ID=?"</span>, new <span class=hljs-type>JsonArray</span>().add(id), ar2 -&gt; {
  <span class=hljs-keyword>if</span> (ar.succeeded()) {
    <span class=hljs-type>int</span> value = ar.<span class=hljs-literal>result</span>().get(<span class=hljs-number>0</span>).getInteger(<span class=hljs-string>"VALUE"</span>);
    // <span class=hljs-type>Continue</span>
  }
});</code></pre><p>Under the hood, the client takes care of the pool acquire/release interaction for you.</p><h4 id=native-transport-and-domain-sockets>Native transport and domain sockets</h4><p>We now support <a href=http://vertx.io/docs/vertx-core/java/#_native_transports>native transports</a> on Linux (Epoll) and MacOS (KQueue), as well as <a href=http://vertx.io/docs/vertx-core/java/#_domain_sockets>UNIX domain sockets</a> for <code>NetServer/NetClient</code> (<code>HttpServer</code>/<code>HttpClient</code> should support UNIX domain sockets soon).</p><h4 id=auth-handler-chaining>Auth handler chaining</h4><p>There are times when you want to support multiple authN/authZ mechanisms in a single application.</p><p>Vert.x Web supports auth handlers <a href=http://vertx.io/docs/vertx-web/java/#_chaining_multiple_auth_handlers>chaining</a></p><h4 id=vert-x-config-improvements>Vert.x config improvements</h4><p>Vert.x Config allows configuring your application by assembling config chunks from different locations such as file, http, zookeeper…</p><p>In this version, we have added the support for Consul and Vault.</p><p>With the <a href=http://vertx.io/docs/vertx-config/java/#_consul_configuration_store>Consul config store</a>, you can retrieve your configuration from a Consul server - so in other words, distribute the configuration from your orchestration infrastructure.</p><p>The <a href=http://vertx.io/docs/vertx-config/java/#_vault_config_store>Vault config store</a> lets you retrieve secrets avoiding hard coding secrets or distributing credentials using an insecure way. Vault enforces the security of your secrets and only allowed applications can retrieve them. In other words, now you can keep your secrets secret.</p><h4 id=acks>ACKs</h4><p>I want on behalf of the team to thank all the contributors for this release including the Google Summer of Code students (<a href=https://twitter.com/titantins>Pavel Drankov</a>, <a href=https://twitter.com/slinkyguardiani>Francesco Guardiani</a> and <a href=https://yunyul.in>Yunyu Lin</a>) that delivered an impressive work.</p><h4 id=finally>Finally</h4><p>The release notes</p><ul><li><a href=https://github.com/vert-x3/wiki/wiki/3.5.0-Release-Notes>https://github.com/vert-x3/wiki/wiki/3.5.0-Release-Notes</a></li></ul><p>Docker images are also available on the <a href="https://hub.docker.com/u/vertx/">Docker Hub</a>. The Vert.x distribution is also available from <a href=http://sdkman.io/index.html>SDKMan</a> and <a href="http://brew.sh/">HomeBrew</a>.</p><p>The event bus client using the SockJS bridge are available from NPM, Bower and as a WebJar:</p><ul><li><a href=https://www.npmjs.com/package/vertx3-eventbus-client>https://www.npmjs.com/package/vertx3-eventbus-client</a></li><li><a href=https://github.com/vert-x3/vertx-bus-bower>https://github.com/vert-x3/vertx-bus-bower</a></li><li><a href="http://www.webjars.org/">http://www.webjars.org/</a></li></ul><p>The artifacts have been deployed to <a href=http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22io.vertx%22%20AND%20v%3A%223.5.0%22>Maven Central</a> and you can get the distribution on <a href=https://bintray.com/vertx/downloads/distribution/3.5.0/view>Bintray</a>.</p></article></article></div><div class=row><div class=col-xs-12 id=disqus_thread></div></div><script type=text/javascript>/* * * CONFIGURATION VARIABLES * * */
  var disqus_shortname = 'vertx';

  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();</script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript></div><footer><div class=container><div class=row><div class="col-xs-4 col-sm-4 col-md-2 col-lg-2"><h2>Eclipse Vert.x</h2><ul class=list-unstyled><li><a href="http://vertx.io/">Home</a></li><li><a href="http://vertx.io/download/">Download</a></li><li><a href="http://vertx.io/docs/">Documentation</a></li><li><a href=https://github.com/vert-x3/wiki/wiki>Wiki</a></li><li><a href="http://vertx.io/blog/">Blog</a></li><li><a href="http://vertx.io/vertx2/" class=vertx-2-link>Vert.x 2</a></li></ul></div><div class="col-xs-4 col-sm-4 col-md-2 col-lg-2"><h2>Community</h2><ul class=list-unstyled><li><a href="http://vertx.io/community/">Help &amp; Contributors</a></li><li><a href="http://vertx.io/materials/">Learning materials</a></li><li><a href=https://groups.google.com/forum/?fromgroups#!forum/vertx>User Group</a></li><li><a href=https://groups.google.com/forum/?fromgroups#!forum/vertx-dev>Developer Group</a></li></ul></div><div class="col-xs-4 col-sm-4 col-md-2 col-lg-2"><h2>Eclipse</h2><ul class=list-unstyled><li><a href="http://www.eclipse.org/">Eclipse Foundation</a></li><li><a href=https://eclipse.org/legal/privacy.php>Privacy Policy</a></li><li><a href=https://eclipse.org/legal/termsofuse.php>Terms of Use</a></li><li><a href=https://eclipse.org/legal/copyright.php>Copyright Agent</a></li><li><a href=http://www.eclipse.org/legal>Legal Resources</a></li></ul></div><div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 copyright"><p>Eclipse Vert.x is open source and dual licensed under the <a href=https://www.eclipse.org/org/documents/epl-v10.php>Eclipse Public License 1.0</a> and <a href=https://www.apache.org/licenses/LICENSE-2.0.html>Apache License 2.0</a>.</p><p>This website is licensed under the <a href="http://creativecommons.org/licenses/by-sa/3.0/">CC BY-SA 3.0 License</a>.<br>Design by <a href=https://www.michel-kraemer.com>Michel Kr&auml;mer</a>.</p><div class=row><div class="col-sm-12 col-md-5 col-md-offset-1 col-lg-offset-2"><a href=http://eclipse.org><img class="logo eclipse-logo" src=http://vertx.io/assets/eclipse_logo_grey_small.png width=204 height=48></a></div><div class="col-sm-12 col-md-5 col-md-offset-1 col-lg-offset-0"><a href=http://cloudbees.com><img class="logo cloudbees-logo" src=http://vertx.io/assets/Button-Built-on-CB-1-grey.png width=180 height=48></a></div><div class="col-sm-12 col-md-5 col-md-offset-7 jprofiler"><a href=http://www.ej-technologies.com/products/jprofiler/overview.html style=text-decoration:none><img class="logo jprofiler-logo" src=http://vertx.io/assets/jprofiler-logo.png width=48 height=48><span class=jprofiler-logo>&nbsp; JPROFILER</span></a></div></div></div></div></div></footer><script src=http://static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.min.js></script><script src=http://vertx.io/javascripts/bootstrap.min.js></script><script src=http://vertx.io/javascripts/highlight.pack.js></script><script>hljs.initHighlightingOnLoad();</script></body></html>