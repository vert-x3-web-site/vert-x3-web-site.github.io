<!DOCTYPE html>
<html lang="en">
<head>
  <title>Vert.x Micrometer Metrics - Vert.x</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="Eclipse Vert.x is a tool-kit for building reactive applications on the JVM." name="description">
  <link href="https://vertx.io/stylesheets/docs.css" media="screen" rel="stylesheet">
  <link href="https://vertx.io/stylesheets/font-awesome.min.css" media="screen" rel="stylesheet">
  <link href="https://vertx.io/javascripts/styles/rainbow.min.css" media="screen" rel="stylesheet">
  <!-- IE 6-8 support of HTML 5 elements -->
  <!--[if lt IE 9]>
  <script src="http://static.jboss.org/theme/js/libs/html5/pre3.6/html5.min.js"></script>
  <![endif]-->

  <link rel="apple-touch-icon" sizes="57x57" href="https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="https://vertx.io/assets/favicons/vertx-favicon-7/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="https://vertx.io/assets/favicons/vertx-favicon-7/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="https://vertx.io/assets/favicons/vertx-favicon-7/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="https://vertx.io/assets/favicons/vertx-favicon-7/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="https://vertx.io/assets/favicons/vertx-favicon-7/manifest.json">
  <link rel="mask-icon" href="https://vertx.io/assets/favicons/vertx-favicon-7/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#7d3194">
  <meta name="msapplication-TileImage" content="https://vertx.io/assets/favicons/vertx-favicon-7/mstile-144x144.png">
  <meta name="theme-color" content="#ffffff">

  <link href="https://fonts.googleapis.com/css?family=Ubuntu:400,500,700,400italic" rel="stylesheet" type="text/css">
  <link rel="alternate" type="application/rss+xml" title="RSS"
     href="https://vertx.io/feed.xml">
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-30144458-1', 'auto');
    ga('create', 'UA-71153120-1', 'auto', 'tracker');
    ga('send', 'pageview');
    ga('tracker.send', 'pageview');
  </script>
</head>
<body>

<a href="http://www.reactivemanifesto.org/" id="reactive-manifesto-banner">
  <img style="border: 0; position: fixed; right: 0; top:0; z-index: 9000"
    src="https://d379ifj7s9wntv.cloudfront.net/reactivemanifesto/images/ribbons/we-are-reactive-black-right.png">
</a>

<a id="skippy" class="sr-only sr-only-focusable" href="#content"><div class="container"><span class="skiplink-text">Skip to main content</span></div></a>

<header class="navbar navbar-default navbar-static-top" id="top" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#vertx-navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="https://vertx.io/" class="navbar-brand"><img alt="Brand" src="https://vertx.io/assets/logo-sm.png"></a>
    </div>
    <nav class="collapse navbar-collapse" id="vertx-navbar-collapse">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="http://start.vertx.io">Starter</a></li>
        <li><a href="https://vertx.io/download/">Download</a></li>
        <li><a href="https://vertx.io/docs/3.5.3/">Documentation</a></li>
        <li><a href="https://github.com/vert-x3/wiki/wiki">Wiki</a></li>
        <li><a href="https://vertx.io/community/">Community</a></li>
        <li><a href="https://vertx.io/materials/">Materials</a></li>
        <li><a href="https://vertx.io/blog/">Blog</a></li>
      </ul>
    </nav>
  </div>
</header>



  <div class="page-header" id="content">
    <div class="container">
      <div class="row">
        <div class="col-sm-12">
          <h1>Vert.x Micrometer Metrics</h1>
          
        </div>
      </div>
    </div>
  </div>



<div id="content">
  <div class="container docs-content">
    <div class="row">
      <div class="col-sm-12 col-md-push-9 col-md-3 hidden-xs hidden-sm">
        <div id="sidebar" data-spy="affix">
          <ul class="sectlevel1">
<li><a href="#_features">Features</a></li>
<li><a href="#_influxdb">InfluxDB</a>
<ul class="sectlevel2">
<li><a href="#_prerequisites">Prerequisites</a></li>
<li><a href="#_getting_started">Getting started</a></li>
<li><a href="#_configuration_examples">Configuration examples</a></li>
</ul>
</li>
<li><a href="#_prometheus">Prometheus</a>
<ul class="sectlevel2">
<li><a href="#_prerequisites_2">Prerequisites</a></li>
<li><a href="#_getting_started_2">Getting started</a></li>
<li><a href="#_configuration_examples_2">Configuration examples</a></li>
</ul>
</li>
<li><a href="#_jmx">JMX</a>
<ul class="sectlevel2">
<li><a href="#_getting_started_3">Getting started</a></li>
<li><a href="#_configuration_examples_3">Configuration examples</a></li>
</ul>
</li>
<li><a href="#_advanced_usage">Advanced usage</a>
<ul class="sectlevel2">
<li><a href="#_disable_some_metric_domains">Disable some metric domains</a></li>
<li><a href="#_user_defined_metrics">User-defined metrics</a></li>
<li><a href="#_other_instrumentation">Other instrumentation</a></li>
<li><a href="#_label_matchers">Label matchers</a></li>
<li><a href="#_snapshots">Snapshots</a></li>
</ul>
</li>
<li><a href="#_vert_x_core_tools_metrics">Vert.x core tools metrics</a>
<ul class="sectlevel2">
<li><a href="#_net_client">Net Client</a></li>
<li><a href="#_http_client">HTTP Client</a></li>
<li><a href="#_datagram_socket">Datagram socket</a></li>
<li><a href="#_net_server">Net Server</a></li>
<li><a href="#_http_server">HTTP Server</a></li>
<li><a href="#_event_bus">Event Bus</a></li>
</ul>
</li>
<li><a href="#_vert_x_pool_metrics">Vert.x pool metrics</a></li>
<li><a href="#_verticle_metrics">Verticle metrics</a></li>
</ul>
        </div>
      </div>
      <div class="col-sm-12 col-md-pull-3 col-md-9">
        <div class="toc hidden-md hidden-lg">
          <h2>Table of Contents</h2>
          <ul class="sectlevel1">
<li><a href="#_features">Features</a></li>
<li><a href="#_influxdb">InfluxDB</a>
<ul class="sectlevel2">
<li><a href="#_prerequisites">Prerequisites</a></li>
<li><a href="#_getting_started">Getting started</a></li>
<li><a href="#_configuration_examples">Configuration examples</a></li>
</ul>
</li>
<li><a href="#_prometheus">Prometheus</a>
<ul class="sectlevel2">
<li><a href="#_prerequisites_2">Prerequisites</a></li>
<li><a href="#_getting_started_2">Getting started</a></li>
<li><a href="#_configuration_examples_2">Configuration examples</a></li>
</ul>
</li>
<li><a href="#_jmx">JMX</a>
<ul class="sectlevel2">
<li><a href="#_getting_started_3">Getting started</a></li>
<li><a href="#_configuration_examples_3">Configuration examples</a></li>
</ul>
</li>
<li><a href="#_advanced_usage">Advanced usage</a>
<ul class="sectlevel2">
<li><a href="#_disable_some_metric_domains">Disable some metric domains</a></li>
<li><a href="#_user_defined_metrics">User-defined metrics</a></li>
<li><a href="#_other_instrumentation">Other instrumentation</a></li>
<li><a href="#_label_matchers">Label matchers</a></li>
<li><a href="#_snapshots">Snapshots</a></li>
</ul>
</li>
<li><a href="#_vert_x_core_tools_metrics">Vert.x core tools metrics</a>
<ul class="sectlevel2">
<li><a href="#_net_client">Net Client</a></li>
<li><a href="#_http_client">HTTP Client</a></li>
<li><a href="#_datagram_socket">Datagram socket</a></li>
<li><a href="#_net_server">Net Server</a></li>
<li><a href="#_http_server">HTTP Server</a></li>
<li><a href="#_event_bus">Event Bus</a></li>
</ul>
</li>
<li><a href="#_vert_x_pool_metrics">Vert.x pool metrics</a></li>
<li><a href="#_verticle_metrics">Verticle metrics</a></li>
</ul>
        </div>
        <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This project is an implementation of the Vert.x Metrics Service Provider Interface (SPI).</p>
</div>
<div class="paragraph">
<p>It uses <a href="http://micrometer.io/">Micrometer</a> for managing metrics and reporting to several backends.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_features">Features</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Vert.x core tools monitoring: TCP/HTTP client and servers, <code><a href="../../apidocs/io/vertx/core/datagram/DatagramSocket.html">DatagramSocket</a></code>,
<code><a href="../../apidocs/io/vertx/core/eventbus/EventBus.html">EventBus</a></code> and pools</p>
</li>
<li>
<p>User defined metrics through Micrometer</p>
</li>
<li>
<p>Reporting to <a href="https://www.influxdata.com/">InfluxDB</a>, <a href="https://prometheus.io/">Prometheus</a> or JMX.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_influxdb">InfluxDB</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_prerequisites">Prerequisites</h3>
<div class="paragraph">
<p>Follow the <a href="https://docs.influxdata.com/influxdb/latest/introduction/getting_started/">instructions to get InfluxDb up and running</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_getting_started">Getting started</h3>
<div class="paragraph">
<p>The modules <em>vertx-micrometer-metrics</em> and <em>micrometer-registry-influx</em> must be present in the classpath.</p>
</div>
<div class="paragraph">
<p>Maven users should add this to their project POM file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>io.vertx<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>vertx-micrometer-metrics<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>3.5.3<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>io.micrometer<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>micrometer-registry-influx<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>1.0.0<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And Gradle users, to their build file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">compile <span class="string"><span class="delimiter">'</span><span class="content">io.vertx:vertx-micrometer-metrics:3.5.3</span><span class="delimiter">'</span></span>
compile <span class="string"><span class="delimiter">'</span><span class="content">io.micrometer:micrometer-registry-influx:1.0.0</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuration_examples">Configuration examples</h3>
<div class="paragraph">
<p>Vert.x does not enable SPI implementations by default. You must enable metric collection in the Vert.x options.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> vertx = Vertx.vertx([
  <span class="key">metricsOptions</span>:[
    <span class="key">influxDbOptions</span>:[
      <span class="key">enabled</span>:<span class="predefined-constant">true</span>
    ],
    <span class="key">enabled</span>:<span class="predefined-constant">true</span>
  ]
])</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_using_a_specific_uri_and_database_name">Using a specific URI and database name</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> vertx = Vertx.vertx([
  <span class="key">metricsOptions</span>:[
    <span class="key">influxDbOptions</span>:[
      <span class="key">enabled</span>:<span class="predefined-constant">true</span>,
      <span class="key">uri</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">http://influxdb.example.com:8888</span><span class="delimiter">&quot;</span></span>,
      <span class="key">db</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">sales-department</span><span class="delimiter">&quot;</span></span>
    ],
    <span class="key">enabled</span>:<span class="predefined-constant">true</span>
  ]
])</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_with_authentication">With authentication</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> vertx = Vertx.vertx([
  <span class="key">metricsOptions</span>:[
    <span class="key">influxDbOptions</span>:[
      <span class="key">enabled</span>:<span class="predefined-constant">true</span>,
      <span class="key">userName</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span>,
      <span class="key">password</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span>
    ],
    <span class="key">enabled</span>:<span class="predefined-constant">true</span>
  ]
])</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prometheus">Prometheus</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_prerequisites_2">Prerequisites</h3>
<div class="paragraph">
<p>Follow the <a href="https://prometheus.io/docs/prometheus/latest/getting_started/">instructions to get Prometheus up and running</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_getting_started_2">Getting started</h3>
<div class="paragraph">
<p>The modules <em>vertx-micrometer-metrics</em> and <em>micrometer-registry-prometheus</em> must be present in the classpath.
You may also probably need <em>vertx-web</em>, to expose the metrics.</p>
</div>
<div class="paragraph">
<p>Maven users should add this to their project POM file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>io.vertx<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>vertx-micrometer-metrics<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>3.5.3<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>io.micrometer<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>micrometer-registry-prometheus<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>1.0.0<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>io.vertx<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>vertx-web<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>3.5.3<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And Gradle users, to their build file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">compile <span class="string"><span class="delimiter">'</span><span class="content">io.vertx:vertx-micrometer-metrics:3.5.3</span><span class="delimiter">'</span></span>
compile <span class="string"><span class="delimiter">'</span><span class="content">io.micrometer:micrometer-registry-prometheus:1.0.0</span><span class="delimiter">'</span></span>
compile <span class="string"><span class="delimiter">'</span><span class="content">io.vertx:vertx-web:3.5.3</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuration_examples_2">Configuration examples</h3>
<div class="paragraph">
<p>Vert.x does not enable SPI implementations by default. You must enable metric collection in the Vert.x options</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> vertx = Vertx.vertx([
  <span class="key">metricsOptions</span>:[
    <span class="key">prometheusOptions</span>:[
      <span class="key">enabled</span>:<span class="predefined-constant">true</span>
    ],
    <span class="key">enabled</span>:<span class="predefined-constant">true</span>
  ]
])</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_using_an_embedded_http_server_wih_custom_endpoint">Using an embedded HTTP server wih custom endpoint</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> vertx = Vertx.vertx([
  <span class="key">metricsOptions</span>:[
    <span class="key">prometheusOptions</span>:[
      <span class="key">enabled</span>:<span class="predefined-constant">true</span>,
      <span class="key">startEmbeddedServer</span>:<span class="predefined-constant">true</span>,
      <span class="key">embeddedServerOptions</span>:[
        <span class="key">port</span>:<span class="integer">8080</span>
      ],
      <span class="key">embeddedServerEndpoint</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">/metrics/vertx</span><span class="delimiter">&quot;</span></span>
    ],
    <span class="key">enabled</span>:<span class="predefined-constant">true</span>
  ]
])</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the embedded server endpoint is not specified, it defaults to <em>/metrics</em>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_binding_metrics_to_an_existing_vert_x_router">Binding metrics to an existing Vert.x router</h4>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> vertx = Vertx.vertx([
  <span class="key">metricsOptions</span>:[
    <span class="key">prometheusOptions</span>:[
      <span class="key">enabled</span>:<span class="predefined-constant">true</span>
    ],
    <span class="key">enabled</span>:<span class="predefined-constant">true</span>
  ]
])

<span class="comment">// Later on, creating a router</span>
<span class="keyword">def</span> router = Router.router(vertx)
router.route(<span class="string"><span class="delimiter">&quot;</span><span class="content">/metrics</span><span class="delimiter">&quot;</span></span>).handler({ routingContext -&gt;
  <span class="keyword">def</span> prometheusRegistry = io.vertx.micrometer.backends.BackendRegistries.getDefaultNow()
  <span class="keyword">if</span> (prometheusRegistry != <span class="predefined-constant">null</span>) {
    <span class="keyword">def</span> response = prometheusRegistry.scrape()
    routingContext.response().end(response)
  } <span class="keyword">else</span> {
    routingContext.fail(<span class="integer">500</span>)
  }
})
vertx.createHttpServer().requestHandler(router.&amp;accept).listen(<span class="integer">8080</span>)</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_jmx">JMX</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_getting_started_3">Getting started</h3>
<div class="paragraph">
<p>The modules <em>vertx-micrometer-metrics</em> and <em>micrometer-registry-jmx</em> must be present in the classpath.</p>
</div>
<div class="paragraph">
<p>Maven users should add this to their project POM file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>io.vertx<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>vertx-micrometer-metrics<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>3.5.3<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
  <span class="tag">&lt;groupId&gt;</span>io.micrometer<span class="tag">&lt;/groupId&gt;</span>
  <span class="tag">&lt;artifactId&gt;</span>micrometer-registry-jmx<span class="tag">&lt;/artifactId&gt;</span>
  <span class="tag">&lt;version&gt;</span>1.0.0<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>And Gradle users, to their build file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">compile <span class="string"><span class="delimiter">'</span><span class="content">io.vertx:vertx-micrometer-metrics:3.5.3</span><span class="delimiter">'</span></span>
compile <span class="string"><span class="delimiter">'</span><span class="content">io.micrometer:micrometer-registry-jmx:1.0.0</span><span class="delimiter">'</span></span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuration_examples_3">Configuration examples</h3>
<div class="paragraph">
<p>Vert.x does not enable SPI implementations by default. You must enable metric collection in the Vert.x options</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> vertx = Vertx.vertx([
  <span class="key">metricsOptions</span>:[
    <span class="key">jmxMetricsOptions</span>:[
      <span class="key">enabled</span>:<span class="predefined-constant">true</span>
    ],
    <span class="key">enabled</span>:<span class="predefined-constant">true</span>
  ]
])</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_with_step_and_domain">With step and domain</h4>
<div class="paragraph">
<p>In Micrometer, <code>step</code> refers to the reporting period, in seconds. <code>domain</code> is the JMX domain under which
MBeans are registered.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> vertx = Vertx.vertx([
  <span class="key">metricsOptions</span>:[
    <span class="key">jmxMetricsOptions</span>:[
      <span class="key">enabled</span>:<span class="predefined-constant">true</span>,
      <span class="key">step</span>:<span class="integer">5</span>,
      <span class="key">domain</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">my.metrics.domain</span><span class="delimiter">&quot;</span></span>
    ],
    <span class="key">enabled</span>:<span class="predefined-constant">true</span>
  ]
])</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_advanced_usage">Advanced usage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Please refer to <code>io.vertx.micrometer.MicrometerMetricsOptions</code> for an exhaustive list of options.</p>
</div>
<div class="sect2">
<h3 id="_disable_some_metric_domains">Disable some metric domains</h3>
<div class="paragraph">
<p>Restricting the Vert.x modules being monitored can be done using
<code>io.vertx.micrometer.MicrometerMetricsOptions#disabledMetricsCategories</code>.</p>
</div>
<div class="paragraph">
<p>For a full list of domains, see <code>io.vertx.micrometer.MetricsDomain</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_user_defined_metrics">User-defined metrics</h3>
<div class="paragraph">
<p>The Micrometer registries are accessible, in order to create new metrics or fetch the existing ones.
By default, an unique registry is used and will be shared across the Vert.x instances of the JVM:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> registry = io.vertx.micrometer.backends.BackendRegistries.getDefaultNow()</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is also possible to have separate registries per Vertx instance, by giving a registry name in metrics options.
Then it can be retrieved specifically:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> vertx = Vertx.vertx([
  <span class="key">metricsOptions</span>:[
    <span class="key">influxDbOptions</span>:[
      <span class="key">enabled</span>:<span class="predefined-constant">true</span>
    ],
    <span class="key">registryName</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">my registry</span><span class="delimiter">&quot;</span></span>,
    <span class="key">enabled</span>:<span class="predefined-constant">true</span>
  ]
])

<span class="comment">// Later on:</span>
<span class="keyword">def</span> registry = io.vertx.micrometer.backends.BackendRegistries.getNow(<span class="string"><span class="delimiter">&quot;</span><span class="content">my registry</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>As an example, here is a custom timer that will track the execution time of a piece of code that is regularly called:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> registry = io.vertx.micrometer.backends.BackendRegistries.getDefaultNow()
<span class="keyword">def</span> timer = io.micrometer.core.instrument.Timer.builder(<span class="string"><span class="delimiter">&quot;</span><span class="content">my.timer</span><span class="delimiter">&quot;</span></span>).description(<span class="string"><span class="delimiter">&quot;</span><span class="content">a description of what this timer does</span><span class="delimiter">&quot;</span></span>).register(registry)

vertx.setPeriodic(<span class="integer">1000</span>, { l -&gt;
  timer.record({ -&gt;
    <span class="comment">// Running here some operation to monitor</span>
  })
})</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more examples, documentation about the Micrometer registry and how to create metrics, check
<a href="http://micrometer.io/docs/concepts#_registry">Micrometer doc</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_other_instrumentation">Other instrumentation</h3>
<div class="paragraph">
<p>Since plain access to Micrometer registries is provided, it is possible to leverage the Micrometer API.
For instance, to instrument the JVM:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> registry = io.vertx.micrometer.backends.BackendRegistries.getDefaultNow()

<span class="keyword">new</span> io.micrometer.core.instrument.binder.jvm.ClassLoaderMetrics().bindTo(registry)
<span class="keyword">new</span> io.micrometer.core.instrument.binder.jvm.JvmMemoryMetrics().bindTo(registry)
<span class="keyword">new</span> io.micrometer.core.instrument.binder.jvm.JvmGcMetrics().bindTo(registry)
<span class="keyword">new</span> io.micrometer.core.instrument.binder.system.ProcessorMetrics().bindTo(registry)
<span class="keyword">new</span> io.micrometer.core.instrument.binder.jvm.JvmThreadMetrics().bindTo(registry)</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>From <a href="http://micrometer.io/docs/ref/jvm">Micrometer documentation</a>.</em></p>
</div>
</div>
<div class="sect2">
<h3 id="_label_matchers">Label matchers</h3>
<div class="paragraph">
<p>The labels (aka tags, or fields&#8230;&#8203;) can be configured through the use of matchers. Here is an example
to whitelist HTTP server metrics per host name and port:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> vertx = Vertx.vertx([
  <span class="key">metricsOptions</span>:[
    <span class="key">prometheusOptions</span>:[
      <span class="key">enabled</span>:<span class="predefined-constant">true</span>
    ],
    <span class="key">labelMatchs</span>:[
      [
        <span class="key">domain</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">HTTP_SERVER</span><span class="delimiter">&quot;</span></span>,
        <span class="key">label</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">local</span><span class="delimiter">&quot;</span></span>,
        <span class="key">value</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">localhost:8080</span><span class="delimiter">&quot;</span></span>
      ]
    ],
    <span class="key">enabled</span>:<span class="predefined-constant">true</span>
  ]
])</code></pre>
</div>
</div>
<div class="paragraph">
<p>Matching rules can work on exact strings or regular expressions (the former is more performant).
When a pattern matches, the value can also be renamed with an alias. By playing with regex and aliases it is possible
to ignore a label partitioning:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> vertx = Vertx.vertx([
  <span class="key">metricsOptions</span>:[
    <span class="key">prometheusOptions</span>:[
      <span class="key">enabled</span>:<span class="predefined-constant">true</span>
    ],
    <span class="key">labelMatchs</span>:[
      [
        <span class="key">label</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">remote</span><span class="delimiter">&quot;</span></span>,
        <span class="key">type</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">REGEX</span><span class="delimiter">&quot;</span></span>,
        <span class="key">value</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">.*</span><span class="delimiter">&quot;</span></span>,
        <span class="key">alias</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">_</span><span class="delimiter">&quot;</span></span>
      ]
    ],
    <span class="key">enabled</span>:<span class="predefined-constant">true</span>
  ]
])</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here, any value for the label "remote" will be replaced with "_".</p>
</div>
<div class="paragraph">
<p>Sometimes, having some labels results in a high cardinality of label values, which can cause troubles / bad
performances on the metrics backend.
This is often the case with the <em>remote</em> label on server metrics.
For that reason, there are rules in the default metrics options to ignore it (one for HTTP server, one for Net server metrics).
It is still possible to stop ignoring it by clearing the label matchers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> vertx = Vertx.vertx([
  <span class="key">metricsOptions</span>:[
    <span class="key">prometheusOptions</span>:[
      <span class="key">enabled</span>:<span class="predefined-constant">true</span>
    ],
    <span class="key">labelMatchs</span>:<span class="type">[]</span>,
    <span class="key">enabled</span>:<span class="predefined-constant">true</span>
  ]
])</code></pre>
</div>
</div>
<div class="paragraph">
<p>Label matching uses Micrometer&#8217;s <code>MeterFilter</code> under the hood. This API can be accessed directly as well:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> registry = io.vertx.micrometer.backends.BackendRegistries.getDefaultNow()

registry.config().meterFilter(io.micrometer.core.instrument.config.MeterFilter.ignoreTags(<span class="string"><span class="delimiter">&quot;</span><span class="content">address</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">remote</span><span class="delimiter">&quot;</span></span>)).meterFilter(io.micrometer.core.instrument.config.MeterFilter.renameTag(<span class="string"><span class="delimiter">&quot;</span><span class="content">vertx.verticle</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">deployed</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">instances</span><span class="delimiter">&quot;</span></span>))</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>See also <a href="http://micrometer.io/docs/concepts#_meter_filters">other examples</a>.</em></p>
</div>
</div>
<div class="sect2">
<h3 id="_snapshots">Snapshots</h3>
<div class="paragraph">
<p>A <code>io.vertx.micrometer.MetricsService</code> can be created out of a <code><a href="../../apidocs/io/vertx/core/metrics/Measured.html">Measured</a></code> object
in order to take a snapshot of its related metrics and measurements.
The snapshot is returned as a <code><a href="../../apidocs/io/vertx/core/json/JsonObject.html">JsonObject</a></code>.</p>
</div>
<div class="paragraph">
<p>A well known <em>Measured</em> object is simply <code><a href="../../apidocs/io/vertx/core/Vertx.html">Vertx</a></code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> metricsService = MetricsService.create(vertx)
<span class="keyword">def</span> metrics = metricsService.getMetricsSnapshot()
println(metrics)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Other components, such as an <code><a href="../../apidocs/io/vertx/core/eventbus/EventBus.html">EventBus</a></code> or a <code><a href="../../apidocs/io/vertx/core/http/HttpServer.html">HttpServer</a></code> are
measurable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> server = vertx.createHttpServer()
<span class="keyword">def</span> metricsService = MetricsService.create(server)
<span class="keyword">def</span> metrics = metricsService.getMetricsSnapshot()
println(metrics)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally it is possible to filter the returned metrics from their base names:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> metricsService = MetricsService.create(vertx)
<span class="comment">// Client + server</span>
<span class="keyword">def</span> metrics = metricsService.getMetricsSnapshot(<span class="string"><span class="delimiter">&quot;</span><span class="content">vertx.http</span><span class="delimiter">&quot;</span></span>)
println(metrics)</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_vert_x_core_tools_metrics">Vert.x core tools metrics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section lists all the metrics generated by monitoring the Vert.x core tools.</p>
</div>
<div class="sect2">
<h3 id="_net_client">Net Client</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 15%;">
<col style="width: 50%;">
<col style="width: 35%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Metric type</th>
<th class="tableblock halign-left valign-top">Metric name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gauge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_net_client_connections{local=&lt;local address&gt;,remote=&lt;remote address&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of connections to the remote host currently opened.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_net_client_bytesReceived{local=&lt;local address&gt;,remote=&lt;remote address&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of bytes received from the remote host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_net_client_bytesSent{local=&lt;local address&gt;,remote=&lt;remote address&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of bytes sent to the remote host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Counter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_net_client_errors{local=&lt;local address&gt;,remote=&lt;remote address&gt;,class=&lt;class&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of errors.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_http_client">HTTP Client</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 15%;">
<col style="width: 50%;">
<col style="width: 35%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Metric type</th>
<th class="tableblock halign-left valign-top">Metric name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gauge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_http_client_connections{local=&lt;local address&gt;,remote=&lt;remote address&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of connections to the remote host currently opened.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_http_client_bytesReceived{local=&lt;local address&gt;,remote=&lt;remote address&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of bytes received from the remote host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_http_client_bytesSent{local=&lt;local address&gt;,remote=&lt;remote address&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of bytes sent to the remote host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Counter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_http_client_errors{local=&lt;local address&gt;,remote=&lt;remote address&gt;,class=&lt;class&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of errors.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gauge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_http_client_requests{local=&lt;local address&gt;,remote=&lt;remote address&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of requests waiting for a response.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Counter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_http_client_requestCount{local=&lt;local address&gt;,remote=&lt;remote address&gt;,method=&lt;http method&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of requests sent.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_http_client_responseTime{local=&lt;local address&gt;,remote=&lt;remote address&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Response time.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Counter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_http_client_responseCount{local=&lt;local address&gt;,remote=&lt;remote address&gt;,code=&lt;response code&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of received responses.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gauge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_http_client_wsConnections{local=&lt;local address&gt;,remote=&lt;remote address&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of websockets currently opened.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_datagram_socket">Datagram socket</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 15%;">
<col style="width: 50%;">
<col style="width: 35%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Metric type</th>
<th class="tableblock halign-left valign-top">Metric name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_datagram_bytesReceived{local=&lt;local&gt;,remote=&lt;remote&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total number of bytes received on the <code>&lt;host&gt;:&lt;port&gt;</code> listening address.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_datagram_bytesSent{remote=&lt;remote&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total number of bytes sent to the remote host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Counter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_datagram_errors{class=&lt;class&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total number of errors.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_net_server">Net Server</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 15%;">
<col style="width: 50%;">
<col style="width: 35%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Metric type</th>
<th class="tableblock halign-left valign-top">Metric name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gauge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_net_server_connections{local=&lt;local address&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of opened connections to the Net Server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_net_server_bytesReceived{local=&lt;local address&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of bytes received by the Net Server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_net_server_bytesSent{local=&lt;local address&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of bytes sent by the Net Server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Counter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_net_server_errors{local=&lt;local address&gt;,class=&lt;class&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of errors.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_http_server">HTTP Server</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 15%;">
<col style="width: 50%;">
<col style="width: 35%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Metric type</th>
<th class="tableblock halign-left valign-top">Metric name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gauge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_http_server_connections{local=&lt;local address&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of opened connections to the HTTP Server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_http_server_bytesReceived{local=&lt;local address&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of bytes received by the HTTP Server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_http_server_bytesSent{local=&lt;local address&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of bytes sent by the HTTP Server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Counter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_http_server_errors{local=&lt;local address&gt;,class=&lt;class&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of errors.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gauge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_http_server_requests{local=&lt;local address&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of requests being processed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Counter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_http_server_requestCount{local=&lt;local address&gt;,method=&lt;http method&gt;,code=&lt;response code&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of processed requests.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Counter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_http_server_requestResetCount{local=&lt;local address&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of requests reset.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_http_server_processingTime{local=&lt;local address&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request processing time.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gauge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_http_client_wsConnections{local=&lt;local address&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of websockets currently opened.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_event_bus">Event Bus</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 15%;">
<col style="width: 50%;">
<col style="width: 35%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Metric type</th>
<th class="tableblock halign-left valign-top">Metric name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gauge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_eventbus_handlers{address=&lt;address&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of event bus handlers in use.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Counter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_eventbus_errors{address=&lt;address&gt;,class=&lt;class&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of errors.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_eventbus_bytesWritten{address=&lt;address&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total number of bytes sent while sending messages to event bus cluster peers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Summary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_eventbus_bytesRead{address=&lt;address&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total number of bytes received while reading messages from event bus cluster peers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gauge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_eventbus_pending{address=&lt;address&gt;,side=&lt;local/remote&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of messages not processed yet. One message published will count for <code>N</code> pending if <code>N</code> handlers
are registered to the corresponding address.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Counter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_eventbus_published{address=&lt;address&gt;,side=&lt;local/remote&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of messages published (publish / subscribe).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Counter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_eventbus_sent{address=&lt;address&gt;,side=&lt;local/remote&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of messages sent (point-to-point).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Counter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_eventbus_received{address=&lt;address&gt;,side=&lt;local/remote&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of messages received.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Counter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_eventbus_delivered{address=&lt;address&gt;,side=&lt;local/remote&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of messages delivered to handlers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Counter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_eventbus_replyFailures{address=&lt;address&gt;,failure=&lt;failure name&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of message reply failures.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_eventbus_processingTime{address=&lt;address&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Processing time for handlers listening to the <code>address</code>.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_vert_x_pool_metrics">Vert.x pool metrics</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section lists all the metrics generated by monitoring Vert.x pools.</p>
</div>
<div class="paragraph">
<p>There are two types currently supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>worker</em> (see <code><a href="../../apidocs/io/vertx/core/WorkerExecutor.html">WorkerExecutor</a></code>)</p>
</li>
<li>
<p><em>datasource</em> (created with Vert.x JDBC client)</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Vert.x creates two worker pools upfront, <em>worker-thread</em> and <em>internal-blocking</em>.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 15%;">
<col style="width: 50%;">
<col style="width: 35%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Metric type</th>
<th class="tableblock halign-left valign-top">Metric name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_pool_queue_delay{pool_type=&lt;type&gt;,pool_name=&lt;name&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time waiting for a resource (queue time).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gauge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_pool_queue_size{pool_type=&lt;type&gt;,pool_name=&lt;name&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of elements waiting for a resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_pool_usage{pool_type=&lt;type&gt;,pool_name=&lt;name&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time using a resource (i.e. processing time for worker pools).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gauge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_pool_inUse{pool_type=&lt;type&gt;,pool_name=&lt;name&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of resources used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Counter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_pool_completed{pool_type=&lt;type&gt;,pool_name=&lt;name&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of elements done with the resource (i.e. total number of tasks executed for worker pools).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gauge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_pool_ratio{pool_type=&lt;type&gt;,pool_name=&lt;name&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pool usage ratio, only present if maximum pool size could be determined.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_verticle_metrics">Verticle metrics</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 15%;">
<col style="width: 50%;">
<col style="width: 35%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Metric type</th>
<th class="tableblock halign-left valign-top">Metric name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gauge</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>vertx_verticle_deployed{name=&lt;name&gt;}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of verticle instances deployed.</p></td>
</tr>
</tbody>
</table>
</div>
</div>

        

        
          <div id="footer">
            <div id="footer-text">
              
                Last updated 2018-07-11 10:05:30 CEST
              
              
            </div>
          </div>
        
      </div>
    </div>
  </div>
</div>

<footer>
  <div class="container">
    <div class="row">
      <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2">
        <h2>Eclipse Vert.x</h2>
        <ul class="list-unstyled">
          <li><a href="https://vertx.io/">Home</a></li>
          <li><a href="https://vertx.io/download/">Download</a></li>
          <li><a href="https://vertx.io/docs/3.5.3/">Documentation</a></li>
          <li><a href="https://github.com/vert-x3/wiki/wiki">Wiki</a></li>
          <li><a href="https://vertx.io/blog/">Blog</a></li>
          <li><a href="https://vertx.io/vertx2/" class="vertx-2-link">Vert.x 2</a></li>
        </ul>
      </div>
      <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2">
        <h2>Community</h2>
        <ul class="list-unstyled">
          <li><a href="https://vertx.io/community/">Help &amp; Contributors</a></li>
          <li><a href="https://vertx.io/materials/">Learning materials</a></li>
          <li><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx">User Group</a></li>
          <li><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx-dev">Developer Group</a></li>
        </ul>
      </div>
      <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2">
        <h2>Eclipse</h2>
        <ul class="list-unstyled">
          <li><a href="http://www.eclipse.org/">Eclipse Foundation</a></li>
          <li><a href="https://eclipse.org/legal/privacy.php">Privacy Policy</a></li>
          <li><a href="https://eclipse.org/legal/termsofuse.php">Terms of Use</a></li>
          <li><a href="https://eclipse.org/legal/copyright.php">Copyright Agent</a></li>
          <li><a href="http://www.eclipse.org/legal">Legal Resources</a></li>
        </ul>
      </div>

      <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 copyright">
        <p>Eclipse Vert.x is open source and dual-licensed under the <a href="http://www.eclipse.org/legal/epl-v20.html">Eclipse Public License 2.0</a> and <a href="https://www.apache.org/licenses/LICENSE-2.0.html">Apache License 2.0</a>.</p>
        <p>This website is licensed under the <a href="http://creativecommons.org/licenses/by-sa/3.0/">CC BY-SA 3.0 License</a>.<br>
        Design by <a href="https://www.michel-kraemer.com">Michel Kr&auml;mer</a>.</p>
        <div class="row">
          <div class="col-sm-12 col-md-5 col-md-offset-1 col-lg-offset-2">
            <a href="http://eclipse.org">
            <img class="logo eclipse-logo" src="https://vertx.io/assets/eclipse_logo_grey_small.png" width="204" height="48">
            </a>
          </div>
          <div class="col-sm-12 col-md-5 col-md-offset-1 col-lg-offset-0">
            <a href="http://cloudbees.com">
            <img class="logo cloudbees-logo" src="https://vertx.io/assets/Button-Built-on-CB-1-grey.png" width="180" height="48">
           </a>
          </div>
          <div class="col-sm-12 col-md-5 col-md-offset-7 jprofiler">
            <a href="http://www.ej-technologies.com/products/jprofiler/overview.html"
            style="text-decoration:none">
            <img class="logo jprofiler-logo" src="https://vertx.io/assets/jprofiler-logo.png" width="48" height="48"><span class="jprofiler-logo">&nbsp; JPROFILER</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="https://vertx.io/javascripts/bootstrap.min.js"></script>
<script src="https://vertx.io/javascripts/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>



<script src="https://vertx.io/javascripts/sidebar.js"></script>


<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#64386b",
      "text": "#ffcdfd"
    },
    "button": {
      "background": "transparent",
      "text": "#f8a8ff",
      "border": "#f8a8ff"
    }
  },
  "content": {
    "message": "This website uses anonymous cookies to ensure we provide you the best experience. ",
    "link": "Opt out!",
    "href": "https://tools.google.com/dlpage/gaoptout/"
  }
})});
</script>
</body>
</html>

