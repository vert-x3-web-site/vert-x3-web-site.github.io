<!DOCTYPE html>
<html lang="en">
<head>
  <title>Definition Stage - Vert.x</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="Eclipse Vert.x is a tool-kit for building reactive applications on the JVM." name="description">
  <link href="https://vertx.io/stylesheets/docs.css" media="screen" rel="stylesheet">
  <link href="https://vertx.io/stylesheets/font-awesome.min.css" media="screen" rel="stylesheet">
  <link href="https://vertx.io/javascripts/styles/rainbow.min.css" media="screen" rel="stylesheet">
  <!-- IE 6-8 support of HTML 5 elements -->
  <!--[if lt IE 9]>
  <script src="http://static.jboss.org/theme/js/libs/html5/pre3.6/html5.min.js"></script>
  <![endif]-->

  <link rel="apple-touch-icon" sizes="57x57" href="https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="https://vertx.io/assets/favicons/vertx-favicon-7/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="https://vertx.io/assets/favicons/vertx-favicon-7/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="https://vertx.io/assets/favicons/vertx-favicon-7/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="https://vertx.io/assets/favicons/vertx-favicon-7/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="https://vertx.io/assets/favicons/vertx-favicon-7/manifest.json">
  <link rel="mask-icon" href="https://vertx.io/assets/favicons/vertx-favicon-7/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#7d3194">
  <meta name="msapplication-TileImage" content="https://vertx.io/assets/favicons/vertx-favicon-7/mstile-144x144.png">
  <meta name="theme-color" content="#ffffff">

  <link href="https://fonts.googleapis.com/css?family=Ubuntu:400,500,700,400italic" rel="stylesheet" type="text/css">
  <link rel="alternate" type="application/rss+xml" title="RSS"
     href="https://vertx.io/feed.xml">
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-30144458-1', 'auto');
    ga('create', 'UA-71153120-1', 'auto', 'tracker');
    ga('send', 'pageview');
    ga('tracker.send', 'pageview');
  </script>
</head>
<body>

<a href="http://www.reactivemanifesto.org/" id="reactive-manifesto-banner">
  <img style="border: 0; position: fixed; right: 0; top:0; z-index: 9000"
    src="https://d379ifj7s9wntv.cloudfront.net/reactivemanifesto/images/ribbons/we-are-reactive-black-right.png">
</a>

<a id="skippy" class="sr-only sr-only-focusable" href="#content"><div class="container"><span class="skiplink-text">Skip to main content</span></div></a>

<header class="navbar navbar-default navbar-static-top" id="top" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#vertx-navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="https://vertx.io/" class="navbar-brand"><img alt="Brand" src="https://vertx.io/assets/logo-sm.png"></a>
    </div>
    <nav class="collapse navbar-collapse" id="vertx-navbar-collapse">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="https://start.vertx.io/">Starter</a></li>
        <li><a href="https://vertx.io/download/">Download</a></li>
        <li><a href="https://how-to.vertx.io/">How-to</a></li>
        <li><a href="https://vertx.io/docs/3.9.0/">Documentation</a></li>
        <li><a href="https://github.com/vert-x3/wiki/wiki">Wiki</a></li>
        <li><a href="https://vertx.io/community/">Community</a></li>
        <li><a href="https://vertx.io/materials/">Materials</a></li>
        <li><a href="https://vertx.io/blog/">Blog</a></li>
      </ul>
    </nav>
  </div>
</header>



  <div class="page-header" id="content">
    <div class="container">
      <div class="row">
        <div class="col-sm-12">
          <h1>Definition Stage</h1>
          
        </div>
      </div>
    </div>
  </div>




<div id="content">
  <div class="container docs-content">
    <div class="row">
      <div class="col-sm-12 col-md-push-9 col-md-3 hidden-xs hidden-sm">
        <div id="sidebar" data-spy="affix">
          <ul class="sectlevel2">
<li><a href="#_definition_stage">Definition Stage</a></li>
<li><a href="#_parsing_stage">Parsing Stage</a></li>
<li><a href="#_query_interrogation_stage">Query / Interrogation Stage</a></li>
<li><a href="#_typed_options_and_arguments">Typed options and arguments</a></li>
<li><a href="#_using_annotations">Using annotations</a></li>
</ul>
        </div>
      </div>
      <div class="col-sm-12 col-md-pull-3 col-md-9">
        <div class="toc hidden-md hidden-lg">
          <h2>Table of Contents</h2>
          <ul class="sectlevel2">
<li><a href="#_definition_stage">Definition Stage</a></li>
<li><a href="#_parsing_stage">Parsing Stage</a></li>
<li><a href="#_query_interrogation_stage">Query / Interrogation Stage</a></li>
<li><a href="#_typed_options_and_arguments">Typed options and arguments</a></li>
<li><a href="#_using_annotations">Using annotations</a></li>
</ul>
        </div>
        <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Vert.x Core provides an API for parsing command line arguments passed to programs. It&#8217;s also able to print help
messages detailing the options available for a command line tool. Even if such features are far from
the Vert.x core topics, this API is used in the <code><a href="../../apidocs/io/vertx/core/Launcher.html">Launcher</a></code> class that you can use in <em>fat-jar</em>
and in the <code>vertx</code> command line tools. In addition, it&#8217;s polyglot (can be used from any supported language) and is
used in Vert.x Shell.</p>
</div>
<div class="paragraph">
<p>Vert.x CLI provides a model to describe your command line interface, but also a parser. This parser supports
different types of syntax:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>POSIX like options (ie. <code>tar -zxvf foo.tar.gz</code>)</p>
</li>
<li>
<p>GNU like long options (ie. <code>du --human-readable --max-depth=1</code>)</p>
</li>
<li>
<p>Java like properties (ie. <code>java -Djava.awt.headless=true -Djava.net.useSystemProxies=true Foo</code>)</p>
</li>
<li>
<p>Short options with value attached (ie. <code>gcc -O2 foo.c</code>)</p>
</li>
<li>
<p>Long options with single hyphen (ie. <code>ant -projecthelp</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using the CLI api is a 3-steps process:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The definition of the command line interface</p>
</li>
<li>
<p>The parsing of the user command line</p>
</li>
<li>
<p>The query / interrogation</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_definition_stage">Definition Stage</h3>
<div class="paragraph">
<p>Each command line interface must define the set of options and arguments that will be used. It also requires a
name. The CLI API uses the <code><a href="../../apidocs/io/vertx/core/cli/Option.html">Option</a></code> and <code><a href="../../apidocs/io/vertx/core/cli/Argument.html">Argument</a></code> classes to
describe options and arguments:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">CLI cli = CLI.create(<span class="string"><span class="delimiter">&quot;</span><span class="content">copy</span><span class="delimiter">&quot;</span></span>)
    .setSummary(<span class="string"><span class="delimiter">&quot;</span><span class="content">A command line interface to copy files.</span><span class="delimiter">&quot;</span></span>)
    .addOption(<span class="keyword">new</span> <span class="predefined-type">Option</span>()
        .setLongName(<span class="string"><span class="delimiter">&quot;</span><span class="content">directory</span><span class="delimiter">&quot;</span></span>)
        .setShortName(<span class="string"><span class="delimiter">&quot;</span><span class="content">R</span><span class="delimiter">&quot;</span></span>)
        .setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">enables directory support</span><span class="delimiter">&quot;</span></span>)
        .setFlag(<span class="predefined-constant">true</span>))
    .addArgument(<span class="keyword">new</span> Argument()
        .setIndex(<span class="integer">0</span>)
        .setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">The source</span><span class="delimiter">&quot;</span></span>)
        .setArgName(<span class="string"><span class="delimiter">&quot;</span><span class="content">source</span><span class="delimiter">&quot;</span></span>))
    .addArgument(<span class="keyword">new</span> Argument()
        .setIndex(<span class="integer">1</span>)
        .setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">The destination</span><span class="delimiter">&quot;</span></span>)
        .setArgName(<span class="string"><span class="delimiter">&quot;</span><span class="content">target</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>As you can see, you can create a new <code><a href="../../apidocs/io/vertx/core/cli/CLI.html">CLI</a></code> using
<code><a href="../../apidocs/io/vertx/core/cli/CLI.html#create-java.lang.String-">CLI.create</a></code>. The passed string is the name of the CLI. Once created you
can set the summary and description. The summary is intended to be short (one line), while the description can
contain more details. Each option and argument are also added on the <code>CLI</code> object using the
<code><a href="../../apidocs/io/vertx/core/cli/CLI.html#addArgument-io.vertx.core.cli.Argument-">addArgument</a></code> and
<code><a href="../../apidocs/io/vertx/core/cli/CLI.html#addOption-io.vertx.core.cli.Option-">addOption</a></code> methods.</p>
</div>
<div class="sect3">
<h4 id="_options">Options</h4>
<div class="paragraph">
<p>An <code><a href="../../apidocs/io/vertx/core/cli/Option.html">Option</a></code> is a command line parameter identified by a <em>key</em> present in the user command
line. Options must have at least a long name or a short name. Long name are generally used using a <code>--</code> prefix,
while short names are used with a single <code>-</code>. Options can get a description displayed in the usage (see below).
Options can receive 0, 1 or several values. An option receiving 0 values is a <code>flag</code>, and must be declared using
<code><a href="../../apidocs/io/vertx/core/cli/Option.html#setFlag-boolean-">setFlag</a></code>. By default, options receive a single value, however, you can
configure the option to receive several values using <code><a href="../../apidocs/io/vertx/core/cli/Option.html#setMultiValued-boolean-">setMultiValued</a></code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">CLI cli = CLI.create(<span class="string"><span class="delimiter">&quot;</span><span class="content">some-name</span><span class="delimiter">&quot;</span></span>)
    .setSummary(<span class="string"><span class="delimiter">&quot;</span><span class="content">A command line interface illustrating the options valuation.</span><span class="delimiter">&quot;</span></span>)
    .addOption(<span class="keyword">new</span> <span class="predefined-type">Option</span>()
        .setLongName(<span class="string"><span class="delimiter">&quot;</span><span class="content">flag</span><span class="delimiter">&quot;</span></span>).setShortName(<span class="string"><span class="delimiter">&quot;</span><span class="content">f</span><span class="delimiter">&quot;</span></span>).setFlag(<span class="predefined-constant">true</span>).setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">a flag</span><span class="delimiter">&quot;</span></span>))
    .addOption(<span class="keyword">new</span> <span class="predefined-type">Option</span>()
        .setLongName(<span class="string"><span class="delimiter">&quot;</span><span class="content">single</span><span class="delimiter">&quot;</span></span>).setShortName(<span class="string"><span class="delimiter">&quot;</span><span class="content">s</span><span class="delimiter">&quot;</span></span>).setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">a single-valued option</span><span class="delimiter">&quot;</span></span>))
    .addOption(<span class="keyword">new</span> <span class="predefined-type">Option</span>()
        .setLongName(<span class="string"><span class="delimiter">&quot;</span><span class="content">multiple</span><span class="delimiter">&quot;</span></span>).setShortName(<span class="string"><span class="delimiter">&quot;</span><span class="content">m</span><span class="delimiter">&quot;</span></span>).setMultiValued(<span class="predefined-constant">true</span>)
        .setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">a multi-valued option</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Options can be marked as mandatory. A mandatory option not set in the user command line throws an exception during
the parsing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">CLI cli = CLI.create(<span class="string"><span class="delimiter">&quot;</span><span class="content">some-name</span><span class="delimiter">&quot;</span></span>)
    .addOption(<span class="keyword">new</span> <span class="predefined-type">Option</span>()
        .setLongName(<span class="string"><span class="delimiter">&quot;</span><span class="content">mandatory</span><span class="delimiter">&quot;</span></span>)
        .setRequired(<span class="predefined-constant">true</span>)
        .setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">a mandatory option</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Non-mandatory options can have a <em>default value</em>. This value would be used if the user does not set the option in
the command line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">CLI cli = CLI.create(<span class="string"><span class="delimiter">&quot;</span><span class="content">some-name</span><span class="delimiter">&quot;</span></span>)
    .addOption(<span class="keyword">new</span> <span class="predefined-type">Option</span>()
        .setLongName(<span class="string"><span class="delimiter">&quot;</span><span class="content">optional</span><span class="delimiter">&quot;</span></span>)
        .setDefaultValue(<span class="string"><span class="delimiter">&quot;</span><span class="content">hello</span><span class="delimiter">&quot;</span></span>)
        .setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">an optional option with a default value</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>An option can be <em>hidden</em> using the <code><a href="../../apidocs/io/vertx/core/cli/Option.html#setHidden-boolean-">setHidden</a></code> method. Hidden option are
not listed in the usage, but can still be used in the user command line (for power-users).</p>
</div>
<div class="paragraph">
<p>If the option value is contrained to a fixed set, you can set the different acceptable choices:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">CLI cli = CLI.create(<span class="string"><span class="delimiter">&quot;</span><span class="content">some-name</span><span class="delimiter">&quot;</span></span>)
    .addOption(<span class="keyword">new</span> <span class="predefined-type">Option</span>()
        .setLongName(<span class="string"><span class="delimiter">&quot;</span><span class="content">color</span><span class="delimiter">&quot;</span></span>)
        .setDefaultValue(<span class="string"><span class="delimiter">&quot;</span><span class="content">green</span><span class="delimiter">&quot;</span></span>)
        .addChoice(<span class="string"><span class="delimiter">&quot;</span><span class="content">blue</span><span class="delimiter">&quot;</span></span>).addChoice(<span class="string"><span class="delimiter">&quot;</span><span class="content">red</span><span class="delimiter">&quot;</span></span>).addChoice(<span class="string"><span class="delimiter">&quot;</span><span class="content">green</span><span class="delimiter">&quot;</span></span>)
        .setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">a color</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Options can also be instantiated from their JSON form.</p>
</div>
</div>
<div class="sect3">
<h4 id="_arguments">Arguments</h4>
<div class="paragraph">
<p>Unlike options, arguments do not have a <em>key</em> and are identified by their <em>index</em>. For example, in
<code>java com.acme.Foo</code>, <code>com.acme.Foo</code> is an argument.</p>
</div>
<div class="paragraph">
<p>Arguments do not have a name, there are identified using a 0-based index. The first parameter has the
index <code>0</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">CLI cli = CLI.create(<span class="string"><span class="delimiter">&quot;</span><span class="content">some-name</span><span class="delimiter">&quot;</span></span>)
    .addArgument(<span class="keyword">new</span> Argument()
        .setIndex(<span class="integer">0</span>)
        .setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">the first argument</span><span class="delimiter">&quot;</span></span>)
        .setArgName(<span class="string"><span class="delimiter">&quot;</span><span class="content">arg1</span><span class="delimiter">&quot;</span></span>))
    .addArgument(<span class="keyword">new</span> Argument()
        .setIndex(<span class="integer">1</span>)
        .setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">the second argument</span><span class="delimiter">&quot;</span></span>)
        .setArgName(<span class="string"><span class="delimiter">&quot;</span><span class="content">arg2</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you don&#8217;t set the argument indexes, it computes it automatically by using the declaration order.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">CLI cli = CLI.create(<span class="string"><span class="delimiter">&quot;</span><span class="content">some-name</span><span class="delimiter">&quot;</span></span>)
    <span class="comment">// will have the index 0</span>
    .addArgument(<span class="keyword">new</span> Argument()
        .setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">the first argument</span><span class="delimiter">&quot;</span></span>)
        .setArgName(<span class="string"><span class="delimiter">&quot;</span><span class="content">arg1</span><span class="delimiter">&quot;</span></span>))
    <span class="comment">// will have the index 1</span>
    .addArgument(<span class="keyword">new</span> Argument()
        .setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">the second argument</span><span class="delimiter">&quot;</span></span>)
        .setArgName(<span class="string"><span class="delimiter">&quot;</span><span class="content">arg2</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>argName</code> is optional and used in the usage message.</p>
</div>
<div class="paragraph">
<p>As options, <code><a href="../../apidocs/io/vertx/core/cli/Argument.html">Argument</a></code> can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>be hidden using <code><a href="../../apidocs/io/vertx/core/cli/Argument.html#setHidden-boolean-">setHidden</a></code></p>
</li>
<li>
<p>be mandatory using <code><a href="../../apidocs/io/vertx/core/cli/Argument.html#setRequired-boolean-">setRequired</a></code></p>
</li>
<li>
<p>have a default value using <code><a href="../../apidocs/io/vertx/core/cli/Argument.html#setDefaultValue-java.lang.String-">setDefaultValue</a></code></p>
</li>
<li>
<p>receive several values using <code><a href="../../apidocs/io/vertx/core/cli/Argument.html#setMultiValued-boolean-">setMultiValued</a></code> - only the last argument
can be multi-valued.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Arguments can also be instantiated from their JSON form.</p>
</div>
</div>
<div class="sect3">
<h4 id="_usage_generation">Usage generation</h4>
<div class="paragraph">
<p>Once your <code><a href="../../apidocs/io/vertx/core/cli/CLI.html">CLI</a></code> instance is configured, you can generate the <em>usage</em> message:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">CLI cli = CLI.create(<span class="string"><span class="delimiter">&quot;</span><span class="content">copy</span><span class="delimiter">&quot;</span></span>)
    .setSummary(<span class="string"><span class="delimiter">&quot;</span><span class="content">A command line interface to copy files.</span><span class="delimiter">&quot;</span></span>)
    .addOption(<span class="keyword">new</span> <span class="predefined-type">Option</span>()
        .setLongName(<span class="string"><span class="delimiter">&quot;</span><span class="content">directory</span><span class="delimiter">&quot;</span></span>)
        .setShortName(<span class="string"><span class="delimiter">&quot;</span><span class="content">R</span><span class="delimiter">&quot;</span></span>)
        .setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">enables directory support</span><span class="delimiter">&quot;</span></span>)
        .setFlag(<span class="predefined-constant">true</span>))
    .addArgument(<span class="keyword">new</span> Argument()
        .setIndex(<span class="integer">0</span>)
        .setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">The source</span><span class="delimiter">&quot;</span></span>)
        .setArgName(<span class="string"><span class="delimiter">&quot;</span><span class="content">source</span><span class="delimiter">&quot;</span></span>))
    .addArgument(<span class="keyword">new</span> Argument()
        .setIndex(<span class="integer">0</span>)
        .setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">The destination</span><span class="delimiter">&quot;</span></span>)
        .setArgName(<span class="string"><span class="delimiter">&quot;</span><span class="content">target</span><span class="delimiter">&quot;</span></span>));

<span class="predefined-type">StringBuilder</span> builder = <span class="keyword">new</span> <span class="predefined-type">StringBuilder</span>();
cli.usage(builder);</code></pre>
</div>
</div>
<div class="paragraph">
<p>It generates an usage message like this one:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>Usage: copy [-R] source target

A command line interface to copy files.

 -R,--directory   enables directory support</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you need to tune the usage message, check the <code><a href="../../apidocs/io/vertx/core/cli/UsageMessageFormatter.html">UsageMessageFormatter</a></code> class.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_parsing_stage">Parsing Stage</h3>
<div class="paragraph">
<p>Once your <code><a href="../../apidocs/io/vertx/core/cli/CLI.html">CLI</a></code> instance is configured, you can parse the user command line to evaluate
each option and argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">CommandLine commandLine = cli.parse(userCommandLineArguments);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code><a href="../../apidocs/io/vertx/core/cli/CLI.html#parse-java.util.List-">parse</a></code> method returns a <code><a href="../../apidocs/io/vertx/core/cli/CommandLine.html">CommandLine</a></code>
object containing the values. By default, it validates the user command line and checks that each mandatory options
and arguments have been set as well as the number of values received by each option. You can disable the
validation by passing <code>false</code> as second parameter of <code><a href="../../apidocs/io/vertx/core/cli/CLI.html#parse-java.util.List-boolean-">parse</a></code>.
This is useful if you want to check an argument or option is present even if the parsed command line is invalid.</p>
</div>
<div class="paragraph">
<p>You can check whether or not the
<code><a href="../../apidocs/io/vertx/core/cli/CommandLine.html">CommandLine</a></code> is valid using <code><a href="../../apidocs/io/vertx/core/cli/CommandLine.html#isValid--">isValid</a></code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_query_interrogation_stage">Query / Interrogation Stage</h3>
<div class="paragraph">
<p>Once parsed, you can retrieve the values of the options and arguments from the
<code><a href="../../apidocs/io/vertx/core/cli/CommandLine.html">CommandLine</a></code> object returned by the <code><a href="../../apidocs/io/vertx/core/cli/CLI.html#parse-java.util.List-">parse</a></code>
method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">CommandLine commandLine = cli.parse(userCommandLineArguments);
<span class="predefined-type">String</span> opt = commandLine.getOptionValue(<span class="string"><span class="delimiter">&quot;</span><span class="content">my-option</span><span class="delimiter">&quot;</span></span>);
<span class="type">boolean</span> flag = commandLine.isFlagEnabled(<span class="string"><span class="delimiter">&quot;</span><span class="content">my-flag</span><span class="delimiter">&quot;</span></span>);
<span class="predefined-type">String</span> arg0 = commandLine.getArgumentValue(<span class="integer">0</span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>One of your option can have been marked as "help". If a user command line enabled a "help" option, the validation
won&#8217;t failed, but give you the opportunity to check if the user asks for help:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">CLI cli = CLI.create(<span class="string"><span class="delimiter">&quot;</span><span class="content">test</span><span class="delimiter">&quot;</span></span>)
    .addOption(
        <span class="keyword">new</span> <span class="predefined-type">Option</span>().setLongName(<span class="string"><span class="delimiter">&quot;</span><span class="content">help</span><span class="delimiter">&quot;</span></span>).setShortName(<span class="string"><span class="delimiter">&quot;</span><span class="content">h</span><span class="delimiter">&quot;</span></span>).setFlag(<span class="predefined-constant">true</span>).setHelp(<span class="predefined-constant">true</span>))
    .addOption(
        <span class="keyword">new</span> <span class="predefined-type">Option</span>().setLongName(<span class="string"><span class="delimiter">&quot;</span><span class="content">mandatory</span><span class="delimiter">&quot;</span></span>).setRequired(<span class="predefined-constant">true</span>));

CommandLine line = cli.parse(<span class="predefined-type">Collections</span>.singletonList(<span class="string"><span class="delimiter">&quot;</span><span class="content">-h</span><span class="delimiter">&quot;</span></span>));

<span class="comment">// The parsing does not fail and let you do:</span>
<span class="keyword">if</span> (!line.isValid() &amp;&amp; line.isAskingForHelp()) {
  <span class="predefined-type">StringBuilder</span> builder = <span class="keyword">new</span> <span class="predefined-type">StringBuilder</span>();
  cli.usage(builder);
  stream.print(builder.toString());
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_typed_options_and_arguments">Typed options and arguments</h3>
<div class="paragraph">
<p>The described <code><a href="../../apidocs/io/vertx/core/cli/Option.html">Option</a></code> and <code><a href="../../apidocs/io/vertx/core/cli/Argument.html">Argument</a></code> classes are <em>untyped</em>,
meaning that the only get String values.
<code><a href="../../apidocs/io/vertx/core/cli/TypedOption.html">TypedOption</a></code> and <code><a href="../../apidocs/io/vertx/core/cli/TypedArgument.html">TypedArgument</a></code> let you specify a <em>type</em>, so the
(String) raw value is converted to the specified type.</p>
</div>
<div class="paragraph">
<p>Instead of
<code><a href="../../apidocs/io/vertx/core/cli/Option.html">Option</a></code> and <code><a href="../../apidocs/io/vertx/core/cli/Argument.html">Argument</a></code>, use <code><a href="../../apidocs/io/vertx/core/cli/TypedOption.html">TypedOption</a></code>
and <code><a href="../../apidocs/io/vertx/core/cli/TypedArgument.html">TypedArgument</a></code> in the <code><a href="../../apidocs/io/vertx/core/cli/CLI.html">CLI</a></code> definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">CLI cli = CLI.create(<span class="string"><span class="delimiter">&quot;</span><span class="content">copy</span><span class="delimiter">&quot;</span></span>)
    .setSummary(<span class="string"><span class="delimiter">&quot;</span><span class="content">A command line interface to copy files.</span><span class="delimiter">&quot;</span></span>)
    .addOption(<span class="keyword">new</span> TypedOption&lt;<span class="predefined-type">Boolean</span>&gt;()
        .setType(<span class="predefined-type">Boolean</span>.class)
        .setLongName(<span class="string"><span class="delimiter">&quot;</span><span class="content">directory</span><span class="delimiter">&quot;</span></span>)
        .setShortName(<span class="string"><span class="delimiter">&quot;</span><span class="content">R</span><span class="delimiter">&quot;</span></span>)
        .setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">enables directory support</span><span class="delimiter">&quot;</span></span>)
        .setFlag(<span class="predefined-constant">true</span>))
    .addArgument(<span class="keyword">new</span> TypedArgument&lt;<span class="predefined-type">File</span>&gt;()
        .setType(<span class="predefined-type">File</span>.class)
        .setIndex(<span class="integer">0</span>)
        .setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">The source</span><span class="delimiter">&quot;</span></span>)
        .setArgName(<span class="string"><span class="delimiter">&quot;</span><span class="content">source</span><span class="delimiter">&quot;</span></span>))
    .addArgument(<span class="keyword">new</span> TypedArgument&lt;<span class="predefined-type">File</span>&gt;()
        .setType(<span class="predefined-type">File</span>.class)
        .setIndex(<span class="integer">0</span>)
        .setDescription(<span class="string"><span class="delimiter">&quot;</span><span class="content">The destination</span><span class="delimiter">&quot;</span></span>)
        .setArgName(<span class="string"><span class="delimiter">&quot;</span><span class="content">target</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you can retrieve the converted values as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">CommandLine commandLine = cli.parse(userCommandLineArguments);
<span class="type">boolean</span> flag = commandLine.getOptionValue(<span class="string"><span class="delimiter">&quot;</span><span class="content">R</span><span class="delimiter">&quot;</span></span>);
<span class="predefined-type">File</span> source = commandLine.getArgumentValue(<span class="string"><span class="delimiter">&quot;</span><span class="content">source</span><span class="delimiter">&quot;</span></span>);
<span class="predefined-type">File</span> target = commandLine.getArgumentValue(<span class="string"><span class="delimiter">&quot;</span><span class="content">target</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The vert.x CLI is able to convert to classes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>having a constructor with a single
<code><a href="../../apidocs/java/lang/String.html">String</a></code> argument, such as <code><a href="../../apidocs/java/io/File.html">File</a></code> or <code><a href="../../apidocs/io/vertx/core/json/JsonObject.html">JsonObject</a></code></p>
</li>
<li>
<p>with a static <code>from</code> or <code>fromString</code> method</p>
</li>
<li>
<p>with a static <code>valueOf</code> method, such as primitive types and enumeration</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In addition, you can implement your own <code><a href="../../apidocs/io/vertx/core/cli/converters/Converter.html">Converter</a></code> and instruct the CLI to use
this converter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">CLI cli = CLI.create(<span class="string"><span class="delimiter">&quot;</span><span class="content">some-name</span><span class="delimiter">&quot;</span></span>)
    .addOption(<span class="keyword">new</span> TypedOption&lt;Person&gt;()
        .setType(Person.class)
        .setConverter(<span class="keyword">new</span> PersonConverter())
        .setLongName(<span class="string"><span class="delimiter">&quot;</span><span class="content">person</span><span class="delimiter">&quot;</span></span>));</code></pre>
</div>
</div>
<div class="paragraph">
<p>For booleans, the boolean values are evaluated to <code>true</code>: <code>on</code>, <code>yes</code>, <code>1</code>, <code>true</code>.</p>
</div>
<div class="paragraph">
<p>If one of your option has an <code>enum</code> as type, it computes the set of choices automatically.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_annotations">Using annotations</h3>
<div class="paragraph">
<p>You can also define your CLI using annotations. Definition is done using annotation on the class and on <em>setter</em>
methods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">&amp;<span class="error">#</span><span class="integer">64</span>;<span class="predefined-type">Name</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">some-name</span><span class="delimiter">&quot;</span></span>)
&amp;<span class="error">#</span><span class="integer">64</span>;Summary(<span class="string"><span class="delimiter">&quot;</span><span class="content">some short summary.</span><span class="delimiter">&quot;</span></span>)
&amp;<span class="error">#</span><span class="integer">64</span>;Description(<span class="string"><span class="delimiter">&quot;</span><span class="content">some long description</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">class</span> <span class="class">AnnotatedCli</span> {

 <span class="directive">private</span> <span class="type">boolean</span> flag;
 <span class="directive">private</span> <span class="predefined-type">String</span> name;
 <span class="directive">private</span> <span class="predefined-type">String</span> arg;

&amp;<span class="error">#</span><span class="integer">64</span>;<span class="predefined-type">Option</span>(shortName = <span class="string"><span class="delimiter">&quot;</span><span class="content">f</span><span class="delimiter">&quot;</span></span>, flag = <span class="predefined-constant">true</span>)
<span class="directive">public</span> <span class="type">void</span> setFlag(<span class="type">boolean</span> flag) {
  <span class="local-variable">this</span>.flag = flag;
}

&amp;<span class="error">#</span><span class="integer">64</span>;<span class="predefined-type">Option</span>(longName = <span class="string"><span class="delimiter">&quot;</span><span class="content">name</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">void</span> setName(<span class="predefined-type">String</span> name) {
  <span class="local-variable">this</span>.name = name;
}

&amp;<span class="error">#</span><span class="integer">64</span>;Argument(index = <span class="integer">0</span>)
<span class="directive">public</span> <span class="type">void</span> setArg(<span class="predefined-type">String</span> arg) {
 <span class="local-variable">this</span>.arg = arg;
}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once annotated, you can define the <code><a href="../../apidocs/io/vertx/core/cli/CLI.html">CLI</a></code> and inject the values using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">CLI cli = CLI.create(AnnotatedCli.class);
CommandLine commandLine = cli.parse(userCommandLineArguments);
AnnotatedCli instance = <span class="keyword">new</span> AnnotatedCli();
CLIConfigurator.inject(commandLine, instance);</code></pre>
</div>
</div>
</div>

        

        
          <div id="footer">
            <div id="footer-text">
              
                Last updated 2020-03-30 09:41:12 CEST
              
              
            </div>
          </div>
        
      </div>
    </div>
  </div>
</div>

<footer>
  <div class="container">
    <div class="row">
      <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2">
        <h2>Eclipse Vert.x</h2>
        <ul class="list-unstyled">
          <li><a href="https://vertx.io/">Home</a></li>
          <li><a href="https://vertx.io/download/">Download</a></li>
          <li><a href="https://vertx.io/docs/3.9.0/">Documentation</a></li>
          <li><a href="https://github.com/vert-x3/wiki/wiki">Wiki</a></li>
          <li><a href="https://vertx.io/blog/">Blog</a></li>
          <li><a href="https://vertx.io/vertx2/" class="vertx-2-link">Vert.x 2</a></li>
        </ul>
      </div>
      <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2">
        <h2>Community</h2>
        <ul class="list-unstyled">
          <li><a href="https://vertx.io/community/">Help &amp; Contributors</a></li>
          <li><a href="https://vertx.io/materials/">Learning materials</a></li>
          <li><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx">User Group</a></li>
          <li><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx-dev">Developer Group</a></li>
        </ul>
      </div>
      <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2">
        <h2>Eclipse</h2>
        <ul class="list-unstyled">
          <li><a href="http://www.eclipse.org/">Eclipse Foundation</a></li>
          <li><a href="https://eclipse.org/legal/privacy.php">Privacy Policy</a></li>
          <li><a href="https://eclipse.org/legal/termsofuse.php">Terms of Use</a></li>
          <li><a href="https://eclipse.org/legal/copyright.php">Copyright Agent</a></li>
          <li><a href="http://www.eclipse.org/legal">Legal Resources</a></li>
        </ul>
      </div>

      <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 copyright">
        <p>Eclipse Vert.x is open source and dual-licensed under the <a href="http://www.eclipse.org/legal/epl-v20.html">Eclipse Public License 2.0</a> and <a href="https://www.apache.org/licenses/LICENSE-2.0.html">Apache License 2.0</a>.</p>
        <p>This website is licensed under the <a href="http://creativecommons.org/licenses/by-sa/3.0/">CC BY-SA 3.0 License</a>.<br>
        Design by <a href="https://www.michel-kraemer.com">Michel Kr&auml;mer</a>.</p>
        <div class="row">
          <div class="col-sm-12 col-md-5 col-md-offset-1 col-lg-offset-2">
            <a href="http://eclipse.org">
            <img class="logo eclipse-logo" src="https://vertx.io/assets/eclipse_logo_grey_small.png" width="204" height="48">
            </a>
          </div>
          <div class="col-sm-12 col-md-5 col-md-offset-1 col-lg-offset-0">
            <a href="http://cloudbees.com">
            <img class="logo cloudbees-logo" src="https://vertx.io/assets/Button-Built-on-CB-1-grey.png" width="180" height="48">
           </a>
          </div>
          <div class="col-sm-12 col-md-5 col-md-offset-7 jprofiler">
            <a href="http://www.ej-technologies.com/products/jprofiler/overview.html"
            style="text-decoration:none">
            <img class="logo jprofiler-logo" src="https://vertx.io/assets/jprofiler-logo.png" width="48" height="48"><span class="jprofiler-logo">&nbsp; JPROFILER</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="https://vertx.io/javascripts/bootstrap.min.js"></script>
<script src="https://vertx.io/javascripts/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>



<script src="https://vertx.io/javascripts/sidebar.js"></script>


<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#64386b",
      "text": "#ffcdfd"
    },
    "button": {
      "background": "transparent",
      "text": "#f8a8ff",
      "border": "#f8a8ff"
    }
  },
  "content": {
    "message": "This website uses anonymous cookies to ensure we provide you the best experience. ",
    "link": "Opt out!",
    "href": "https://tools.google.com/dlpage/gaoptout/"
  }
})});
</script>
</body>
</html>

