<!DOCTYPE html>
<html lang="en">
<head>
  <title>Hazelcast Cluster Manager - Vert.x</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <meta content="Eclipse Vert.x is a tool-kit for building reactive applications on the JVM." name="description">
  <link href="https://vertx.io/stylesheets/docs.css" media="screen" rel="stylesheet">
  <link href="https://vertx.io/stylesheets/font-awesome.min.css" media="screen" rel="stylesheet">
  <link href="https://vertx.io/javascripts/styles/rainbow.min.css" media="screen" rel="stylesheet">
  <!-- IE 6-8 support of HTML 5 elements -->
  <!--[if lt IE 9]>
  <script src="http://static.jboss.org/theme/js/libs/html5/pre3.6/html5.min.js"></script>
  <![endif]-->

  <link rel="apple-touch-icon" sizes="57x57" href="https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://vertx.io/assets/favicons/vertx-favicon-7/apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="https://vertx.io/assets/favicons/vertx-favicon-7/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="https://vertx.io/assets/favicons/vertx-favicon-7/android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="https://vertx.io/assets/favicons/vertx-favicon-7/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="https://vertx.io/assets/favicons/vertx-favicon-7/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="https://vertx.io/assets/favicons/vertx-favicon-7/manifest.json">
  <link rel="mask-icon" href="https://vertx.io/assets/favicons/vertx-favicon-7/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#7d3194">
  <meta name="msapplication-TileImage" content="https://vertx.io/assets/favicons/vertx-favicon-7/mstile-144x144.png">
  <meta name="theme-color" content="#ffffff">

  <link href="https://fonts.googleapis.com/css?family=Ubuntu:400,500,700,400italic" rel="stylesheet" type="text/css">
  <link rel="alternate" type="application/rss+xml" title="RSS"
     href="https://vertx.io/feed.xml">
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-30144458-1', 'auto');
    ga('create', 'UA-71153120-1', 'auto', 'tracker');
    ga('send', 'pageview');
    ga('tracker.send', 'pageview');
  </script>
</head>
<body>

<a href="http://www.reactivemanifesto.org/" id="reactive-manifesto-banner">
  <img style="border: 0; position: fixed; right: 0; top:0; z-index: 9000"
    src="https://d379ifj7s9wntv.cloudfront.net/reactivemanifesto/images/ribbons/we-are-reactive-black-right.png">
</a>

<a id="skippy" class="sr-only sr-only-focusable" href="#content"><div class="container"><span class="skiplink-text">Skip to main content</span></div></a>

<header class="navbar navbar-default navbar-static-top" id="top" role="banner">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#vertx-navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="https://vertx.io/" class="navbar-brand"><img alt="Brand" src="https://vertx.io/assets/logo-sm.png"></a>
    </div>
    <nav class="collapse navbar-collapse" id="vertx-navbar-collapse">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="https://start.vertx.io/">Starter</a></li>
        <li><a href="https://vertx.io/download/">Download</a></li>
        <li><a href="https://how-to.vertx.io/">How-to</a></li>
        <li><a href="https://vertx.io/docs/3.8.4/">Documentation</a></li>
        <li><a href="https://github.com/vert-x3/wiki/wiki">Wiki</a></li>
        <li><a href="https://vertx.io/community/">Community</a></li>
        <li><a href="https://vertx.io/materials/">Materials</a></li>
        <li><a href="https://vertx.io/blog/">Blog</a></li>
      </ul>
    </nav>
  </div>
</header>



  <div class="page-header" id="content">
    <div class="container">
      <div class="row">
        <div class="col-sm-12">
          <h1>Hazelcast Cluster Manager</h1>
          
        </div>
      </div>
    </div>
  </div>




<div id="content">
  <div class="container docs-content">
    <div class="row">
      <div class="col-sm-12 col-md-push-9 col-md-3 hidden-xs hidden-sm">
        <div id="sidebar" data-spy="affix">
          <ul class="sectlevel1">
<li><a href="#_using_this_cluster_manager">Using this cluster manager</a></li>
<li><a href="#configcluster">Configuring this cluster manager</a>
<ul class="sectlevel2">
<li><a href="#_configuring_with_xml">Configuring with XML</a></li>
<li><a href="#_configuring_programmatically">Configuring programmatically</a></li>
<li><a href="#_discovery_options">Discovery options</a></li>
</ul>
</li>
<li><a href="#_using_an_existing_hazelcast_cluster">Using an existing Hazelcast cluster</a></li>
<li><a href="#_changing_timeout_for_failed_nodes">Changing timeout for failed nodes</a></li>
<li><a href="#_using_hazelcast_async_methods">Using Hazelcast async methods</a></li>
<li><a href="#_trouble_shooting_clustering">Trouble shooting clustering</a>
<ul class="sectlevel2">
<li><a href="#_multicast_not_enabled_on_the_machine">Multicast not enabled on the machine.</a></li>
<li><a href="#_using_wrong_network_interface">Using wrong network interface</a></li>
<li><a href="#_using_a_vpn">Using a VPN</a></li>
<li><a href="#_when_multicast_is_not_available">When multicast is not available</a></li>
<li><a href="#_enabling_logging">Enabling logging</a></li>
</ul>
</li>
<li><a href="#_hazelcast_logging">Hazelcast logging</a></li>
<li><a href="#_using_a_different_hazelcast_version">Using a different Hazelcast version</a></li>
<li><a href="#_configuring_for_kubernetes">Configuring for Kubernetes</a>
<ul class="sectlevel2">
<li><a href="#_rolling_updates">Rolling updates</a></li>
</ul>
</li>
<li><a href="#_cluster_administration">Cluster administration</a>
<ul class="sectlevel2">
<li><a href="#_data_partitioning">Data partitioning</a></li>
<li><a href="#_split_brain_syndrome">Split-brain syndrome</a></li>
<li><a href="#_recommendations">Recommendations</a></li>
</ul>
</li>
</ul>
        </div>
      </div>
      <div class="col-sm-12 col-md-pull-3 col-md-9">
        <div class="toc hidden-md hidden-lg">
          <h2>Table of Contents</h2>
          <ul class="sectlevel1">
<li><a href="#_using_this_cluster_manager">Using this cluster manager</a></li>
<li><a href="#configcluster">Configuring this cluster manager</a>
<ul class="sectlevel2">
<li><a href="#_configuring_with_xml">Configuring with XML</a></li>
<li><a href="#_configuring_programmatically">Configuring programmatically</a></li>
<li><a href="#_discovery_options">Discovery options</a></li>
</ul>
</li>
<li><a href="#_using_an_existing_hazelcast_cluster">Using an existing Hazelcast cluster</a></li>
<li><a href="#_changing_timeout_for_failed_nodes">Changing timeout for failed nodes</a></li>
<li><a href="#_using_hazelcast_async_methods">Using Hazelcast async methods</a></li>
<li><a href="#_trouble_shooting_clustering">Trouble shooting clustering</a>
<ul class="sectlevel2">
<li><a href="#_multicast_not_enabled_on_the_machine">Multicast not enabled on the machine.</a></li>
<li><a href="#_using_wrong_network_interface">Using wrong network interface</a></li>
<li><a href="#_using_a_vpn">Using a VPN</a></li>
<li><a href="#_when_multicast_is_not_available">When multicast is not available</a></li>
<li><a href="#_enabling_logging">Enabling logging</a></li>
</ul>
</li>
<li><a href="#_hazelcast_logging">Hazelcast logging</a></li>
<li><a href="#_using_a_different_hazelcast_version">Using a different Hazelcast version</a></li>
<li><a href="#_configuring_for_kubernetes">Configuring for Kubernetes</a>
<ul class="sectlevel2">
<li><a href="#_rolling_updates">Rolling updates</a></li>
</ul>
</li>
<li><a href="#_cluster_administration">Cluster administration</a>
<ul class="sectlevel2">
<li><a href="#_data_partitioning">Data partitioning</a></li>
<li><a href="#_split_brain_syndrome">Split-brain syndrome</a></li>
<li><a href="#_recommendations">Recommendations</a></li>
</ul>
</li>
</ul>
        </div>
        <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This is a cluster manager implementation for Vert.x that uses <a href="http://hazelcast.com">Hazelcast</a>.</p>
</div>
<div class="paragraph">
<p>It is the default cluster manager used in the Vert.x distribution, but it can be replaced with another implementation as Vert.x
cluster managers are pluggable.  This implementation is packaged inside:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
 <span class="tag">&lt;groupId&gt;</span>io.vertx<span class="tag">&lt;/groupId&gt;</span>
 <span class="tag">&lt;artifactId&gt;</span>vertx-hazelcast<span class="tag">&lt;/artifactId&gt;</span>
 <span class="tag">&lt;version&gt;</span>3.8.4<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In Vert.x a cluster manager is used for various functions including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Discovery and group membership of Vert.x nodes in a cluster</p>
</li>
<li>
<p>Maintaining cluster wide topic subscriber lists (so we know which nodes are interested in which event bus addresses)</p>
</li>
<li>
<p>Distributed Map support</p>
</li>
<li>
<p>Distributed Locks</p>
</li>
<li>
<p>Distributed Counters</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Cluster managersdo not* handle the event bus inter-node transport, this is done directly by Vert.x with TCP connections.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_this_cluster_manager">Using this cluster manager</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you are using Vert.x from the command line, the jar corresponding to this cluster manager (it will be named <code>vertx-hazelcast-3.8.4.jar</code>
should be in the <code>lib</code> directory of the Vert.x installation.</p>
</div>
<div class="paragraph">
<p>If you want clustering with this cluster manager in your Vert.x Maven or Gradle project then just add a dependency to
the artifact: <code>io.vertx:vertx-hazelcast:3.8.4</code> in your project.</p>
</div>
<div class="paragraph">
<p>If the jar is on your classpath as above then Vert.x will automatically detect this and use it as the cluster manager.
Please make sure you don&#8217;t have any other cluster managers on your classpath or Vert.x might
choose the wrong one.</p>
</div>
<div class="paragraph">
<p>You can also specify the cluster manager programmatically if you are embedding Vert.x by specifying it on the options
when you are creating your Vert.x instance, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ClusterManager mgr = <span class="keyword">new</span> HazelcastClusterManager();

VertxOptions options = <span class="keyword">new</span> VertxOptions().setClusterManager(mgr);

Vertx.clusteredVertx(options, res -&gt; {
  <span class="keyword">if</span> (res.succeeded()) {
    Vertx vertx = res.result();
  } <span class="keyword">else</span> {
    <span class="comment">// failed!</span>
  }
});</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configcluster">Configuring this cluster manager</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_configuring_with_xml">Configuring with XML</h3>
<div class="paragraph">
<p>Usually the cluster manager is configured by a file
<a href="https://github.com/vert-x3/vertx-hazelcast/blob/master/src/main/resources/default-cluster.xml"><code>default-cluster.xml</code></a>
which is packaged inside the jar.</p>
</div>
<div class="paragraph">
<p>If you want to override this configuration you can provide a file called <code>cluster.xml</code> on your classpath and this
will be used instead. If you want to embed the <code>cluster.xml</code> file in a fat jar, it must be located at the root of the
fat jar. If it&#8217;s an external file, the <strong>directory</strong> containing the file must be added to the classpath. For
example, if you are using the <em>launcher</em> class from Vert.x, the classpath enhancement can be done as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code># If the cluster.xml is in the current directory:
java -jar ... -cp . -cluster
vertx run MyVerticle -cp . -cluster

# If the cluster.xml is in the conf directory
java -jar ... -cp conf -cluster</code></pre>
</div>
</div>
<div class="paragraph">
<p>Another way to override the configuration is by providing the system property <code>vertx.hazelcast.config</code> with a
location:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code># Use a cluster configuration located in an external file
java -Dvertx.hazelcast.config=./config/my-cluster-config.xml -jar ... -cluster

# Or use a custom configuration from the classpath
java -Dvertx.hazelcast.config=classpath:my/package/config/my-cluster-config.xml -jar ... -cluster</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>vertx.hazelcast.config</code> system property, when present, overrides any <code>cluster.xml</code> on the classpath, but if
loading
from this system property fails, then loading falls back to either <code>cluster.xml</code> or the Hazelcast default configuration.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
Configuration of Hazelcast the <code>-Dhazelcast.config</code> system property is not supported by Vert.x and should
not be used.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The xml file is a Hazelcast configuration file and is described in detail in the documentation on the Hazelcast
web-site.</p>
</div>
</div>
<div class="sect2">
<h3 id="_configuring_programmatically">Configuring programmatically</h3>
<div class="paragraph">
<p>You can specify configuration programmatically if embedding:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Config hazelcastConfig = <span class="keyword">new</span> Config();

<span class="comment">// Now set some stuff on the config (omitted)</span>

ClusterManager mgr = <span class="keyword">new</span> HazelcastClusterManager(hazelcastConfig);

VertxOptions options = <span class="keyword">new</span> VertxOptions().setClusterManager(mgr);

Vertx.clusteredVertx(options, res -&gt; {
  <span class="keyword">if</span> (res.succeeded()) {
    Vertx vertx = res.result();
  } <span class="keyword">else</span> {
    <span class="comment">// failed!</span>
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>It might also be useful to customize an existing XML configuration.
For example, you might want to change the cluster group name and password:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Config hazelcastConfig = ConfigUtil.loadConfig();

hazelcastConfig.getGroupConfig()
  .setName(<span class="string"><span class="delimiter">&quot;</span><span class="content">my-cluster-name</span><span class="delimiter">&quot;</span></span>)
  .setPassword(<span class="string"><span class="delimiter">&quot;</span><span class="content">passwd</span><span class="delimiter">&quot;</span></span>);

ClusterManager mgr = <span class="keyword">new</span> HazelcastClusterManager(hazelcastConfig);

VertxOptions options = <span class="keyword">new</span> VertxOptions().setClusterManager(mgr);

Vertx.clusteredVertx(options, res -&gt; {
  <span class="keyword">if</span> (res.succeeded()) {
    Vertx vertx = res.result();
  } <span class="keyword">else</span> {
    <span class="comment">// failed!</span>
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>ConfigUtil#loadConfig</code> loads Hazelcast config XML and transform it into a <code>Config</code> object.
The content is read from:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>the location denoted by the <code>vertx.hazelcast.config</code> sysprop, if present, or</p>
</li>
<li>
<p>the <code>cluster.xml</code> file on the classpath, if present, or</p>
</li>
<li>
<p>the default config file</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_discovery_options">Discovery options</h3>
<div class="paragraph">
<p>Hazelcast supports several different discovery options.
The default configuration uses multicast so you must have multicast enabled on your network for this to work.</p>
</div>
<div class="paragraph">
<p>For full documentation on how to configure discovery differently please consult the Hazelcast documentation.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_an_existing_hazelcast_cluster">Using an existing Hazelcast cluster</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can pass an existing <code>HazelcastInstance</code> in the cluster manager to reuse an existing cluster:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">ClusterManager mgr = <span class="keyword">new</span> HazelcastClusterManager(hazelcastInstance);
VertxOptions options = <span class="keyword">new</span> VertxOptions().setClusterManager(mgr);
Vertx.clusteredVertx(options, res -&gt; {
  <span class="keyword">if</span> (res.succeeded()) {
    Vertx vertx = res.result();
  } <span class="keyword">else</span> {
    <span class="comment">// failed!</span>
  }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, vert.x is not the cluster owner and so do not shutdown the cluster on close.</p>
</div>
<div class="paragraph">
<p>Notice that the custom Hazelcast instance need to be configured with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;properties&gt;</span>
 <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.shutdownhook.enabled</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>false<span class="tag">&lt;/property&gt;</span>
<span class="tag">&lt;/properties&gt;</span>
<span class="tag">&lt;multimap</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">__vertx.subs</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
 <span class="tag">&lt;backup-count&gt;</span>1<span class="tag">&lt;/backup-count&gt;</span>
<span class="tag">&lt;/multimap&gt;</span>
<span class="tag">&lt;map</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">__vertx.haInfo</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
 <span class="tag">&lt;time-to-live-seconds&gt;</span>0<span class="tag">&lt;/time-to-live-seconds&gt;</span>
 <span class="tag">&lt;max-idle-seconds&gt;</span>0<span class="tag">&lt;/max-idle-seconds&gt;</span>
 <span class="tag">&lt;eviction-policy&gt;</span>NONE<span class="tag">&lt;/eviction-policy&gt;</span>
 <span class="tag">&lt;max-size</span> <span class="attribute-name">policy</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">PER_NODE</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>0<span class="tag">&lt;/max-size&gt;</span>
 <span class="tag">&lt;eviction-percentage&gt;</span>25<span class="tag">&lt;/eviction-percentage&gt;</span>
 <span class="tag">&lt;merge-policy&gt;</span>com.hazelcast.map.merge.LatestUpdateMapMergePolicy<span class="tag">&lt;/merge-policy&gt;</span>
<span class="tag">&lt;/map&gt;</span>
<span class="tag">&lt;semaphore</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">__vertx.*</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
 <span class="tag">&lt;initial-permits&gt;</span>1<span class="tag">&lt;/initial-permits&gt;</span>
<span class="tag">&lt;/semaphore&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
Hazelcast clients or smart clients are not supported.
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
Make sure Hazelcast is started before and shut down after Vert.x.
Also, the Hazelcast shutdown hook should be disabled (see xml example, or via system property).
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_changing_timeout_for_failed_nodes">Changing timeout for failed nodes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default a node will be removed from the cluster if Hazelcast didn&#8217;t receive a heartbeat for 300 seconds. To change
this value <code>hazelcast.max.no.heartbeat.seconds</code> system property such as in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>-Dhazelcast.max.no.heartbeat.seconds=5</pre>
</div>
</div>
<div class="paragraph">
<p>Afterwards a node will be removed from the cluster after 5 seconds without a heartbeat.</p>
</div>
<div class="paragraph">
<p>See <a href="http://docs.hazelcast.org/docs/3.6/manual/html-single/index.html#system-properties">Hazelcast
system-properties</a> and
<a href="http://docs.hazelcast.org/docs/3.6/manual/html-single/index.html#configuring-with-system-properties">configuring Hazelcast
with system properties</a> for the other properties you can configure.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_hazelcast_async_methods">Using Hazelcast async methods</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Hazelcast&#8217;s <code>IMap</code> and <code>IAtomicLong</code> interfaces can be used with async methods returning <code>ICompletableFuture&lt;V&gt;</code>, a natural fit for Vert.x threading model.</p>
</div>
<div class="paragraph">
<p>Supplying the option <code>-Dvertx.hazelcast.async-api=true</code> on JVM startup, will indicate that the async Hazelcast API methods will be used to communicate with the hazelcast cluster.
Effectively, this means that when this option is enabled, execution of all <code>Counter</code> operations and <code>AsyncMap.get</code>,<code>AsyncMap.put</code> and <code>AsyncMap.remove</code> operations will occur in the calling thread (the event loop), instead of a worker thread with <code>vertx.executeBlocking</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_trouble_shooting_clustering">Trouble shooting clustering</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If the default multicast configuration is not working here are some common causes:</p>
</div>
<div class="sect2">
<h3 id="_multicast_not_enabled_on_the_machine">Multicast not enabled on the machine.</h3>
<div class="paragraph">
<p>It is quite common in particular on OSX machines for multicast to be disabled by default. Please google for
information on how to enable this.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_wrong_network_interface">Using wrong network interface</h3>
<div class="paragraph">
<p>If you have more than one network interface on your machine (and this can also be the case if you are running
VPN software on your machine), then Hazelcast may be using the wrong one.</p>
</div>
<div class="paragraph">
<p>To tell Hazelcast to use a specific interface you can provide the IP address of the interface in the <code>interfaces</code>
element of the configuration. Make sure you set the <code>enabled</code> attribute to <code>true</code>. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;interfaces enabled="true"&gt;
 &lt;interface&gt;192.168.1.20&lt;/interface&gt;
&lt;/interfaces&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>When running Vert.x is in clustered mode, you should also make sure that Vert.x knows about the correct interface.
When running at the command line this is done by specifying the <code>cluster-host</code> option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>vertx run myverticle.js -cluster -cluster-host your-ip-address</pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>your-ip-address</code> is the same IP address you specified in the Hazelcast configuration.</p>
</div>
<div class="paragraph">
<p>If using Vert.x programmatically you can specify this using
<code><a href="../../apidocs/io/vertx/core/VertxOptions.html#setClusterHost-java.lang.String-">setClusterHost</a></code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_a_vpn">Using a VPN</h3>
<div class="paragraph">
<p>This is a variation of the above case. VPN software often works by creating a virtual network interface which often
doesn&#8217;t support multicast. If you have a VPN running and you do not specify the correct interface to use in both the
hazelcast configuration and to Vert.x then the VPN interface may be chosen instead of the correct interface.</p>
</div>
<div class="paragraph">
<p>So, if you have a VPN running you may have to configure both the Hazelcast and Vert.x to use the correct interface as
described in the previous section.</p>
</div>
</div>
<div class="sect2">
<h3 id="_when_multicast_is_not_available">When multicast is not available</h3>
<div class="paragraph">
<p>In some cases you may not be able to use multicast as it might not be available in your environment. In that case
you should configure another transport, e.g. TCP  to use TCP sockets, or AWS when running on Amazon EC2.</p>
</div>
<div class="paragraph">
<p>For more information on available Hazelcast transports and how to configure them please consult the Hazelcast
documentation.</p>
</div>
</div>
<div class="sect2">
<h3 id="_enabling_logging">Enabling logging</h3>
<div class="paragraph">
<p>When trouble-shooting clustering issues with Hazelcast it&#8217;s often useful to get some logging output from Hazelcast
to see if it&#8217;s forming a cluster properly. You can do this (when using the default JUL logging) by adding a file
called <code>vertx-default-jul-logging.properties</code> on your classpath. This is a standard java.util.logging (JUL)
configuration file. Inside it set:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>com.hazelcast.level=INFO</pre>
</div>
</div>
<div class="paragraph">
<p>and also</p>
</div>
<div class="listingblock">
<div class="content">
<pre>java.util.logging.ConsoleHandler.level=INFO
java.util.logging.FileHandler.level=INFO</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hazelcast_logging">Hazelcast logging</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The logging backend used by Hazelcast is <code>jdk</code> by default (understand JUL). If you want to redirect the logging to
another library, you need to set the <code>hazelcast.logging.type</code> system property such as in:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>-Dhazelcast.logging.type=slf4j</pre>
</div>
</div>
<div class="paragraph">
<p>See the <a href="http://docs.hazelcast.org/docs/3.6.1/manual/html-single/index.html#logging-configuration">hazelcast documentation</a> for more details.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_a_different_hazelcast_version">Using a different Hazelcast version</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You may want to use a different version of Hazelcast. The default version is <code>3.12.2</code>. To do so, you
need to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>put the version you want in the application classpath</p>
</li>
<li>
<p>if you are running a fat jar, configure your build manager to use the right version</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In this later case, you would need in Maven:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
 <span class="tag">&lt;groupId&gt;</span>com.hazelcast<span class="tag">&lt;/groupId&gt;</span>
 <span class="tag">&lt;artifactId&gt;</span>hazelcast<span class="tag">&lt;/artifactId&gt;</span>
 <span class="tag">&lt;version&gt;</span>ENTER_YOUR_VERSION_HERE<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
 <span class="tag">&lt;groupId&gt;</span>io.vertx<span class="tag">&lt;/groupId&gt;</span>
 <span class="tag">&lt;artifactId&gt;</span>vertx-hazelcast<span class="tag">&lt;/artifactId&gt;</span>
 <span class="tag">&lt;version&gt;</span>3.8.4<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Depending on the version, you may need to exclude some transitive dependencies.</p>
</div>
<div class="paragraph">
<p>On Gradle, you can achieve the same overloading using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>dependencies {
compile ("io.vertx:vertx-hazelcast:3.8.4"){
  exclude group: 'com.hazelcast', module: 'hazelcast'
}
compile "com.hazelcast:hazelcast:ENTER_YOUR_VERSION_HERE"
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuring_for_kubernetes">Configuring for Kubernetes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>On Kubernetes, Hazelcast should be configured to use the <a href="https://github.com/hazelcast/hazelcast-kubernetes">Hazelcast Kubernetes</a> plugin.</p>
</div>
<div class="paragraph">
<p>First, add the <code>io.vertx:vertx-hazelcast:${vertx.version}</code> and <code>com.hazelcast:hazelcast-kubernetes:${hazelcast-kubernetes.version}</code> dependencies to your project.
With Maven it looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependency&gt;</span>
 <span class="tag">&lt;groupId&gt;</span>io.vertx<span class="tag">&lt;/groupId&gt;</span>
 <span class="tag">&lt;artifactId&gt;</span>vertx-hazelcast<span class="tag">&lt;/artifactId&gt;</span>
 <span class="tag">&lt;version&gt;</span>${vertx.version}<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span>
<span class="tag">&lt;dependency&gt;</span>
 <span class="tag">&lt;groupId&gt;</span>com.hazelcast<span class="tag">&lt;/groupId&gt;</span>
 <span class="tag">&lt;artifactId&gt;</span>hazelcast-kubernetes<span class="tag">&lt;/artifactId&gt;</span>
 <span class="tag">&lt;version&gt;</span>${hazelcast-kubernetes.version}<span class="tag">&lt;/version&gt;</span>
<span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If you use a different version of the Hazelcast core library, make sure to use a compatible version of the Kubernetes discovery plugin.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The second step is to configure the discovery plugin inside of your Hazelcast configuration, by either providing a custom <code>cluster.xml</code> file or programmatically, as described in <a href="#configcluster">Configuring this cluster manager</a>.</p>
</div>
<div class="paragraph">
<p>The plugin provides two <a href="https://github.com/hazelcast/hazelcast-kubernetes#understanding-discovery-modes">discovery modes</a>: <em>Kubernetes API</em> and <em>DNS Lookup</em>.
Please refer to the plugin project page for pros and cons of both modes.</p>
</div>
<div class="paragraph">
<p>In this document, we will use <em>DNS Lookup</em> discovery. The following properties have to be changed / added:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;hazelcast&gt;</span>
 <span class="tag">&lt;properties&gt;</span>
   <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">hazelcast.discovery.enabled</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>true<span class="tag">&lt;/property&gt;</span> <b class="conum">(1)</b>
 <span class="tag">&lt;/properties&gt;</span>

 <span class="tag">&lt;network&gt;</span>
   <span class="tag">&lt;join&gt;</span>
     <span class="tag">&lt;multicast</span> <span class="attribute-name">enabled</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span> <b class="conum">(2)</b>
     <span class="tag">&lt;tcp-ip</span> <span class="attribute-name">enabled</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>

     <span class="tag">&lt;discovery-strategies&gt;</span>
       <span class="tag">&lt;discovery-strategy</span> <span class="attribute-name">enabled</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <b class="conum">(3)</b>
           <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">com.hazelcast.kubernetes.HazelcastKubernetesDiscoveryStrategy</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
         <span class="tag">&lt;properties&gt;</span>
           <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">service-dns</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>MY-SERVICE-DNS-NAME<span class="tag">&lt;/property&gt;</span> <b class="conum">(4)</b>
         <span class="tag">&lt;/properties&gt;</span>
       <span class="tag">&lt;/discovery-strategy&gt;</span>
     <span class="tag">&lt;/discovery-strategies&gt;</span>
   <span class="tag">&lt;/join&gt;</span>
 <span class="tag">&lt;/network&gt;</span>
<span class="tag">&lt;/hazelcast&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Activate Discovery SPI</p>
</li>
<li>
<p>Deactivate other discoveries</p>
</li>
<li>
<p>Activate the Kubernetes plugin</p>
</li>
<li>
<p>Service DNS, usually in the form of <code>MY-SERVICE-NAME.MY-NAMESPACE.svc.cluster.local</code> but depends on the Kubernetes distribution</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The <code>MY-SERVICE-DNS-NAME</code> value must be a <strong>headless</strong> Kubernetes service name that will be used by Hazelcast to identify all cluster members.
A headless service can be created with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">apiVersion</span>: <span class="string"><span class="content">v1</span></span>
<span class="key">kind</span>: <span class="string"><span class="content">Service</span></span>
<span class="key">metadata</span>:
 <span class="key">namespace</span>: <span class="string"><span class="content">MY-NAMESPACE</span></span>
 <span class="key">name</span>: <span class="string"><span class="content">MY-SERVICE-NAME</span></span>
<span class="key">spec</span>:
 <span class="key">selector</span>:
   <span class="key">component</span>: <span class="string"><span class="content">MY-SERVICE-NAME </span></span><b class="conum">(1)</b>
 <span class="key">clusterIP</span>: <span class="string"><span class="content">None</span></span>
 <span class="key">ports</span>:
 - <span class="string"><span class="content">name: hz-port-name</span></span>
   <span class="key">port</span>: <span class="string"><span class="content">5701</span></span>
   <span class="key">protocol</span>: <span class="string"><span class="content">TCP</span></span></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Cluster members selected by label</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Eventually, attach the <code>component</code> label to all deployments that should be part of the cluster:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">apiVersion</span>: <span class="string"><span class="content">extensions/v1beta1</span></span>
<span class="key">kind</span>: <span class="string"><span class="content">Deployment</span></span>
<span class="key">metadata</span>:
 <span class="key">namespace</span>: <span class="string"><span class="content">MY-NAMESPACE</span></span>
<span class="key">spec</span>:
 <span class="key">template</span>:
   <span class="key">metadata</span>:
     <span class="key">labels</span>:
       <span class="key">component</span>: <span class="string"><span class="content">MY-SERVICE-NAME</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Further configuration details are available on the <a href="https://github.com/hazelcast/hazelcast-kubernetes">Hazelcast Kubernetes Plugin page</a>.</p>
</div>
<div class="sect2">
<h3 id="_rolling_updates">Rolling updates</h3>
<div class="paragraph">
<p>During rolling updates, it is recommended to replace pods one by one.</p>
</div>
<div class="paragraph">
<p>To do so, we must configure Kubernetes to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>never start more than one new pod at once</p>
</li>
<li>
<p>forbid more than one unavailable pod during the process</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span class="key">spec</span>:
 <span class="key">strategy</span>:
   <span class="key">type</span>: <span class="string"><span class="content">Rolling</span></span>
   <span class="key">rollingParams</span>:
     <span class="key">updatePeriodSeconds</span>: <span class="string"><span class="content">10</span></span>
     <span class="key">intervalSeconds</span>: <span class="string"><span class="content">20</span></span>
     <span class="key">timeoutSeconds</span>: <span class="string"><span class="content">600</span></span>
     <span class="key">maxUnavailable</span>: <span class="string"><span class="content">1 </span></span><b class="conum">(1)</b>
     <span class="key">maxSurge</span>: <span class="string"><span class="content">1 </span></span> <b class="conum">(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>the maximum number of pods that can be unavailable during the update process</p>
</li>
<li>
<p>the maximum number of pods that can be created over the desired number of pods</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Also, the pod readiness probe must take the cluster state into account.
Please refer to the <a href="#one-by-one">cluster administration</a> section for details on how to implement a readiness probe with <a href="../../vertx-health-check/java/">Vert.x Health Checks</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cluster_administration">Cluster administration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Hazelcast cluster manager works by turning Vert.x nodes into members of a Hazelcast cluster.
As a consequence, Vert.x cluster manager administration should follow the Hazelcast management guidelines.</p>
</div>
<div class="paragraph">
<p>First, let&#8217;s take a step back and introduce data partitioning and split-brain syndrome.</p>
</div>
<div class="sect2">
<h3 id="_data_partitioning">Data partitioning</h3>
<div class="paragraph">
<p>Each Vert.x node holds pieces of the clustering data: eventbus subscriptions, async map entries, clustered counters&#8230;&#8203; etc.</p>
</div>
<div class="paragraph">
<p>When a member joins or leaves the cluster, Hazelcast migrates data partitions.
In other words, it moves data around to accomodate the new cluster topology.
This process may take some time, depending on the amount of clustered data and number of nodes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_split_brain_syndrome">Split-brain syndrome</h3>
<div class="paragraph">
<p>In a perfect world, there would be no network equipment failures.
Reality is, though, that sooner or later your cluster will be divided into smaller groups, unable to see each others.</p>
</div>
<div class="paragraph">
<p>Hazelcast is capable of merging the nodes back into a single cluster.
But just as with data partition migrations, this process may take some time.
Before the cluster is fully functional again, some eventbus consumers might not be able to get messages.
Or high-availability may not be able to redeploy a failing verticle.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>It is difficult (if possible at all) to make a difference between a network partition and:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>long GC pauses (leading to missed heartbeats checks),</p>
</li>
<li>
<p>many nodes being killed forcefully, at-once, because you are deploying a new version of your application</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_recommendations">Recommendations</h3>
<div class="paragraph">
<p>Considering the common clustering issues discussed above, it is recommended to stick to the following good practices.</p>
</div>
<div class="sect3">
<h4 id="_graceful_shutdown">Graceful shutdown</h4>
<div class="paragraph">
<p>Avoid stopping members forcefully (e.g, <code>kill -9</code> a node).</p>
</div>
<div class="paragraph">
<p>Of course process crashes are inevitable, but a graceful shutdown helps to get the remaining nodes in a stable state faster.</p>
</div>
</div>
<div class="sect3">
<h4 id="one-by-one">One node after the other</h4>
<div class="paragraph">
<p>When rolling a new version of your app, scaling-up or down your cluster, add or remove nodes one after the other.</p>
</div>
<div class="paragraph">
<p>Stopping nodes one by one prevents the cluster from thinking a network partition occured.
Adding them one by one allows for clean, incremental data partition migrations.</p>
</div>
<div class="paragraph">
<p>The cluster safety can be verified with <a href="../../vertx-health-check/java/">Vert.x Health Checks</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">Handler</span>&lt;Promise&lt;Status&gt;&gt; procedure = ClusterHealthCheck.createProcedure(vertx);
HealthChecks checks = HealthChecks.create(vertx).register(<span class="string"><span class="delimiter">&quot;</span><span class="content">cluster-health</span><span class="delimiter">&quot;</span></span>, procedure);</code></pre>
</div>
</div>
<div class="paragraph">
<p>After creation, the health check can be exposed over HTTP with a <a href="../../vertx-web/java/">Vert.x Web</a> router handler:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Router router = Router.router(vertx);
router.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">/readiness</span><span class="delimiter">&quot;</span></span>).handler(HealthCheckHandler.createWithHealthChecks(checks));</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_using_lite_members">Using Lite Members</h4>
<div class="paragraph">
<p>To minimize the time a Vert.x cluster spends accomodating a new topology, you may use external data nodes and mark Vert.x nodes as <a href="https://docs.hazelcast.org/docs/latest/manual/html-single/#enabling-lite-members"><em>Lite Members</em></a>.</p>
</div>
<div class="paragraph">
<p><em>Lite Members</em> participate in a Hazelcast cluster like regular members, but they do not own any data partition.
Therefore, Hazelcast does not need to migrate partitions when such members are added or removed.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
You must start the external data nodes beforehand as Hazelcast won&#8217;t create a cluster with <em>Lite Members</em> only.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To start an external node, you can use the Hazelcast distribution start script, or proceed programmatically.</p>
</div>
<div class="paragraph">
<p>Vert.x nodes can be marked as <em>Lite Members</em> in the XML configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;lite-member</span> <span class="attribute-name">enabled</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also do it programmatically:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Config hazelcastConfig = ConfigUtil.loadConfig()
  .setLiteMember(<span class="predefined-constant">true</span>);

ClusterManager mgr = <span class="keyword">new</span> HazelcastClusterManager(hazelcastConfig);

VertxOptions options = <span class="keyword">new</span> VertxOptions().setClusterManager(mgr);

Vertx.clusteredVertx(options, res -&gt; {
  <span class="keyword">if</span> (res.succeeded()) {
    Vertx vertx = res.result();
  } <span class="keyword">else</span> {
    <span class="comment">// failed!</span>
  }
});</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>

        

        
          <div id="footer">
            <div id="footer-text">
              
                Last updated 2019-11-20 18:24:48 CET
              
              
            </div>
          </div>
        
      </div>
    </div>
  </div>
</div>

<footer>
  <div class="container">
    <div class="row">
      <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2">
        <h2>Eclipse Vert.x</h2>
        <ul class="list-unstyled">
          <li><a href="https://vertx.io/">Home</a></li>
          <li><a href="https://vertx.io/download/">Download</a></li>
          <li><a href="https://vertx.io/docs/3.8.4/">Documentation</a></li>
          <li><a href="https://github.com/vert-x3/wiki/wiki">Wiki</a></li>
          <li><a href="https://vertx.io/blog/">Blog</a></li>
          <li><a href="https://vertx.io/vertx2/" class="vertx-2-link">Vert.x 2</a></li>
        </ul>
      </div>
      <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2">
        <h2>Community</h2>
        <ul class="list-unstyled">
          <li><a href="https://vertx.io/community/">Help &amp; Contributors</a></li>
          <li><a href="https://vertx.io/materials/">Learning materials</a></li>
          <li><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx">User Group</a></li>
          <li><a href="https://groups.google.com/forum/?fromgroups#!forum/vertx-dev">Developer Group</a></li>
        </ul>
      </div>
      <div class="col-xs-4 col-sm-4 col-md-2 col-lg-2">
        <h2>Eclipse</h2>
        <ul class="list-unstyled">
          <li><a href="http://www.eclipse.org/">Eclipse Foundation</a></li>
          <li><a href="https://eclipse.org/legal/privacy.php">Privacy Policy</a></li>
          <li><a href="https://eclipse.org/legal/termsofuse.php">Terms of Use</a></li>
          <li><a href="https://eclipse.org/legal/copyright.php">Copyright Agent</a></li>
          <li><a href="http://www.eclipse.org/legal">Legal Resources</a></li>
        </ul>
      </div>

      <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 copyright">
        <p>Eclipse Vert.x is open source and dual-licensed under the <a href="http://www.eclipse.org/legal/epl-v20.html">Eclipse Public License 2.0</a> and <a href="https://www.apache.org/licenses/LICENSE-2.0.html">Apache License 2.0</a>.</p>
        <p>This website is licensed under the <a href="http://creativecommons.org/licenses/by-sa/3.0/">CC BY-SA 3.0 License</a>.<br>
        Design by <a href="https://www.michel-kraemer.com">Michel Kr&auml;mer</a>.</p>
        <div class="row">
          <div class="col-sm-12 col-md-5 col-md-offset-1 col-lg-offset-2">
            <a href="http://eclipse.org">
            <img class="logo eclipse-logo" src="https://vertx.io/assets/eclipse_logo_grey_small.png" width="204" height="48">
            </a>
          </div>
          <div class="col-sm-12 col-md-5 col-md-offset-1 col-lg-offset-0">
            <a href="http://cloudbees.com">
            <img class="logo cloudbees-logo" src="https://vertx.io/assets/Button-Built-on-CB-1-grey.png" width="180" height="48">
           </a>
          </div>
          <div class="col-sm-12 col-md-5 col-md-offset-7 jprofiler">
            <a href="http://www.ej-technologies.com/products/jprofiler/overview.html"
            style="text-decoration:none">
            <img class="logo jprofiler-logo" src="https://vertx.io/assets/jprofiler-logo.png" width="48" height="48"><span class="jprofiler-logo">&nbsp; JPROFILER</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="https://vertx.io/javascripts/bootstrap.min.js"></script>
<script src="https://vertx.io/javascripts/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>



<script src="https://vertx.io/javascripts/sidebar.js"></script>


<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.0.3/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#64386b",
      "text": "#ffcdfd"
    },
    "button": {
      "background": "transparent",
      "text": "#f8a8ff",
      "border": "#f8a8ff"
    }
  },
  "content": {
    "message": "This website uses anonymous cookies to ensure we provide you the best experience. ",
    "link": "Opt out!",
    "href": "https://tools.google.com/dlpage/gaoptout/"
  }
})});
</script>
</body>
</html>

